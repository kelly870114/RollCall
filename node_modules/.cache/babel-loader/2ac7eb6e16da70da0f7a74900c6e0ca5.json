{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\src\\\\components\\\\Classpage\\\\ClassSelector.js\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport { Button } from '@material-ui/core';\nimport Airtable from 'airtable';\nvar base = new Airtable({\n  apiKey: 'keyA7EKdngjou4Dgy'\n}).base('appcXtOTPnE4QWIIt');\nvar counter = 0;\n\nfunction createData(subject, class_id) {\n  counter += 1;\n  return {\n    id: counter,\n    subject: subject,\n    class_id: class_id\n  };\n}\n\nvar styles = function styles(theme) {\n  return {\n    root: {\n      display: 'flex',\n      flexWrap: 'wrap'\n    },\n    formControl: {\n      marginLeft: theme.spacing.unit * 10,\n      marginTop: theme.spacing.unit,\n      marginBottom: theme.spacing.unit,\n      minWidth: 120,\n      width: 150\n    },\n    selectEmpty: {\n      marginTop: theme.spacing.unit\n    },\n    button: {\n      margin: 'auto 30px',\n      borderRadius: '20px',\n      marginLeft: theme.spacing.unit * 10\n    }\n  };\n};\n\nvar SimpleSelect =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(SimpleSelect, _React$Component);\n\n  function SimpleSelect() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, SimpleSelect);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SimpleSelect)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      grade: '',\n      subject: '',\n      myclass: '',\n      labelWidth: 0,\n      classData: [],\n      data: [],\n      dataInit: []\n    };\n\n    _this.handleChange = function (name) {\n      return function (event) {\n        //this.setState({ [event.target.name]: event.target.value });\n        _this.setState(_defineProperty({}, name, event.target.value));\n      };\n    };\n\n    _this.handleSubjectChange = function (name) {\n      return function (event) {\n        _this.setState(_defineProperty({}, name, event.target.value));\n\n        var temp = [];\n        var count = _this.state.dataInit.length;\n\n        for (var index = 0; index < count; index++) {\n          if (_this.state.dataInit[index].subject === event.target.value) {\n            temp.push(_this.state.dataInit[index]);\n          }\n        }\n\n        _this.setState({\n          data: temp\n        });\n\n        if (event.target.value === \"1\") {\n          _this.setState({\n            data: _this.state.dataInit\n          });\n        }\n      };\n    };\n\n    _this.handleClick = function () {\n      _this.props.callbackFromClassSelector(_this.state.myclass);\n    };\n\n    return _this;\n  }\n\n  _createClass(SimpleSelect, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.setState({\n        labelWidth: ReactDOM.findDOMNode(this.InputLabelRef).offsetWidth\n      });\n      base('ClassDay').select({\n        view: 'Grid view'\n      }).eachPage(function (records, fetchNextPage) {\n        _this2.setState({\n          records: records\n        });\n\n        var subject_name = _this2.state.records.map(function (record, index) {\n          return record.fields['subject_name'];\n        });\n\n        var class_id = _this2.state.records.map(function (record, index) {\n          return record.fields['class_id'];\n        }); //select sunject\n\n\n        var temp = [];\n        var temp2 = [];\n        var tempClassId = [];\n\n        for (var index = 0; index < subject_name.length; index++) {\n          temp.push(subject_name[index]);\n        }\n\n        var classResult = temp.filter(function (element, index, arr) {\n          return arr.indexOf(element) === index;\n        });\n\n        for (index = 0; index < classResult.length; index++) {\n          temp2.push(classResult[index]);\n        }\n\n        _this2.setState({\n          classData: temp2\n        }); //table\n\n\n        for (var index = 0; index < class_id.length; index++) {\n          tempClassId.push(createData(subject_name[index], class_id[index]));\n        }\n\n        _this2.setState({\n          data: tempClassId\n        });\n\n        _this2.setState({\n          dataInit: tempClassId\n        });\n\n        fetchNextPage();\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var classes = this.props.classes;\n      return React.createElement(\"form\", {\n        className: classes.root,\n        autoComplete: \"off\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        variant: \"outlined\",\n        className: classes.formControl,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(InputLabel, {\n        ref: function ref(_ref) {\n          _this3.InputLabelRef = _ref;\n        },\n        htmlFor: \"outlined-grade-simple\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"\\u5E74\\u7D1A\"), React.createElement(Select, {\n        value: this.state.grade //onChange={this.handleChange}\n        ,\n        onChange: this.handleChange('grade'),\n        input: React.createElement(OutlinedInput, {\n          labelWidth: this.state.labelWidth,\n          name: \"grade\",\n          id: \"outlined-asubject-simple\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142\n          },\n          __self: this\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(MenuItem, {\n        value: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(\"em\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, \"\\u5E74\\u7D1A\")), React.createElement(MenuItem, {\n        value: 10,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, \"\\u570B\\u4E00\"), React.createElement(MenuItem, {\n        value: 20,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, \"\\u570B\\u4E8C\"), React.createElement(MenuItem, {\n        value: 30,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, \"\\u570B\\u4E09\"))), React.createElement(FormControl, {\n        variant: \"outlined\",\n        className: classes.formControl,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(InputLabel, {\n        ref: function ref(_ref2) {\n          _this3.InputLabelRef = _ref2;\n        },\n        htmlFor: \"outlined-subject-simple\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, \"\\u79D1\\u76EE\"), React.createElement(Select, {\n        value: this.state.subject //onChange={this.handleChange}\n        ,\n        onChange: this.handleSubjectChange('subject'),\n        input: React.createElement(OutlinedInput, {\n          labelWidth: this.state.labelWidth,\n          name: \"subject\",\n          id: \"outlined-asubject-simple\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 172\n          },\n          __self: this\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, React.createElement(MenuItem, {\n        value: \"1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(\"em\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, \"\\u79D1\\u76EE\")), this.state.classData.map(function (n, index) {\n        return React.createElement(MenuItem, {\n          key: n.id,\n          value: n,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184\n          },\n          __self: this\n        }, n);\n      }))), React.createElement(FormControl, {\n        variant: \"outlined\",\n        className: classes.formControl,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, React.createElement(InputLabel, {\n        ref: function ref(_ref3) {\n          _this3.InputLabelRef = _ref3;\n        },\n        htmlFor: \"outlined-myclass-simple\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, \"\\u73ED\\u5225\"), React.createElement(Select, {\n        value: this.state.myclass //onChange={this.handleChange}\n        ,\n        onChange: this.handleChange('myclass'),\n        input: React.createElement(OutlinedInput, {\n          labelWidth: this.state.labelWidth,\n          name: \"myclass\",\n          id: \"outlined-asubject-simple\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 203\n          },\n          __self: this\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, React.createElement(MenuItem, {\n        value: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, React.createElement(\"em\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, \"\\u73ED\\u5225\")), this.state.data.map(function (n, index) {\n        return React.createElement(MenuItem, {\n          key: n.id,\n          value: n.class_id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 215\n          },\n          __self: this\n        }, n.class_id);\n      }))), React.createElement(Button, {\n        variant: \"outlined\",\n        size: \"large\",\n        onClick: this.handleClick,\n        className: classes.button,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, \"\\u641C\\u5C0B\"));\n    }\n  }]);\n\n  return SimpleSelect;\n}(React.Component);\n\nSimpleSelect.propTypes = {\n  classes: PropTypes.object.isRequired\n};\nexport default withStyles(styles)(SimpleSelect);","map":{"version":3,"sources":["C:\\Users\\耍廢社\\Desktop\\MyProject\\src\\components\\Classpage\\ClassSelector.js"],"names":["React","ReactDOM","PropTypes","withStyles","OutlinedInput","InputLabel","MenuItem","FormControl","Select","Button","Airtable","base","apiKey","counter","createData","subject","class_id","id","styles","theme","root","display","flexWrap","formControl","marginLeft","spacing","unit","marginTop","marginBottom","minWidth","width","selectEmpty","button","margin","borderRadius","SimpleSelect","state","grade","myclass","labelWidth","classData","data","dataInit","handleChange","name","event","setState","target","value","handleSubjectChange","temp","count","length","index","push","handleClick","props","callbackFromClassSelector","findDOMNode","InputLabelRef","offsetWidth","select","view","eachPage","records","fetchNextPage","subject_name","map","record","fields","temp2","tempClassId","classResult","filter","element","arr","indexOf","classes","ref","n","Component","propTypes","object","isRequired"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport { Button } from '@material-ui/core';\r\nimport Airtable from 'airtable';\r\n\r\nconst base = new Airtable({ apiKey: 'keyA7EKdngjou4Dgy' }).base('appcXtOTPnE4QWIIt');\r\n\r\nlet counter = 0;\r\nfunction createData(subject, class_id) {\r\n    counter += 1;\r\n    return { id: counter, subject, class_id};\r\n}\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n    },\r\n    formControl: {\r\n        marginLeft: theme.spacing.unit * 10,\r\n        marginTop: theme.spacing.unit,\r\n        marginBottom: theme.spacing.unit,\r\n        minWidth: 120,\r\n        width: 150,\r\n    },\r\n    selectEmpty: {\r\n        marginTop: theme.spacing.unit,\r\n    },\r\n    button: {\r\n        margin: 'auto 30px',\r\n        borderRadius: '20px',\r\n        marginLeft: theme.spacing.unit * 10,\r\n    },\r\n});\r\n\r\nclass SimpleSelect extends React.Component {\r\n    state = {\r\n        grade: '',\r\n        subject: '',\r\n        myclass: '',\r\n        labelWidth: 0,\r\n        classData: [],\r\n\r\n        data: [],\r\n        dataInit: [],\r\n    };\r\n\r\n    componentDidMount() {\r\n        this.setState({\r\n            labelWidth: ReactDOM.findDOMNode(this.InputLabelRef).offsetWidth,\r\n        });\r\n        base('ClassDay').select({ view: 'Grid view' })\r\n            .eachPage(\r\n                (records, fetchNextPage) => {\r\n                    this.setState({ records });\r\n                    \r\n                    const subject_name = this.state.records.map((record, index) => record.fields['subject_name']);\r\n                    const class_id = this.state.records.map((record, index) => record.fields['class_id']);\r\n\r\n\r\n                    //select sunject\r\n                    var temp = [];\r\n                    var temp2 = [];\r\n                    var tempClassId = [];\r\n                    for (var index = 0; index < subject_name.length; index++) {\r\n                        temp.push(subject_name[index]);\r\n                    }\r\n\r\n                    var classResult = temp.filter(function (element, index, arr) {\r\n                        return arr.indexOf(element) === index;\r\n                    });\r\n\r\n                    for (index = 0; index < classResult.length; index++) {\r\n                        temp2.push(classResult[index]);\r\n                    }\r\n\r\n                    this.setState({ classData: temp2 });\r\n\r\n                    //table\r\n                    for (var index = 0; index < class_id.length; index++) {\r\n                        tempClassId.push(createData(subject_name[index], class_id[index]));\r\n                    }\r\n                    this.setState({ data: tempClassId });\r\n                    this.setState({ dataInit: tempClassId });\r\n\r\n                    fetchNextPage();\r\n                }\r\n            );\r\n\r\n    }\r\n\r\n    handleChange  = name => event => {\r\n        //this.setState({ [event.target.name]: event.target.value });\r\n        this.setState({ [name]: event.target.value });\r\n    };\r\n\r\n    handleSubjectChange  = name => event => {\r\n        this.setState({ [name]: event.target.value });\r\n        let temp = [];\r\n        var count = this.state.dataInit.length;\r\n        for (var index = 0; index < count; index++) {\r\n            if (this.state.dataInit[index].subject === event.target.value) {\r\n                temp.push(this.state.dataInit[index]);\r\n            }\r\n        }\r\n        this.setState({ data: temp });\r\n        if (event.target.value === \"1\") {\r\n            this.setState({ data: this.state.dataInit });\r\n        }\r\n    };\r\n\r\n    handleClick = () => {\r\n        this.props.callbackFromClassSelector(this.state.myclass);\r\n    }\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n\r\n        return (\r\n            <form className={classes.root} autoComplete=\"off\">\r\n                <FormControl variant=\"outlined\" className={classes.formControl}>\r\n                    <InputLabel\r\n                        ref={ref => {\r\n                            this.InputLabelRef = ref;\r\n                        }}\r\n                        htmlFor=\"outlined-grade-simple\"\r\n                    >\r\n                        年級\r\n                    </InputLabel>\r\n                    <Select\r\n                        value={this.state.grade}\r\n                        //onChange={this.handleChange}\r\n                        onChange={this.handleChange('grade')}\r\n                        input={\r\n                            <OutlinedInput\r\n                                labelWidth={this.state.labelWidth}\r\n                                name=\"grade\"\r\n                                id=\"outlined-asubject-simple\"\r\n                            />\r\n                        }\r\n                    >\r\n                        <MenuItem value=\"\">\r\n                            <em>年級</em>\r\n                        </MenuItem>\r\n                        <MenuItem value={10}>國一</MenuItem>\r\n                        <MenuItem value={20}>國二</MenuItem>\r\n                        <MenuItem value={30}>國三</MenuItem>\r\n                    </Select>\r\n                </FormControl>\r\n\r\n                <FormControl variant=\"outlined\" className={classes.formControl}>\r\n                    <InputLabel\r\n                        ref={ref => {\r\n                            this.InputLabelRef = ref;\r\n                        }}\r\n                        htmlFor=\"outlined-subject-simple\"\r\n                    >\r\n                        科目\r\n                    </InputLabel>\r\n                    <Select\r\n                        value={this.state.subject}\r\n                        //onChange={this.handleChange}\r\n                        onChange={this.handleSubjectChange('subject')}\r\n                        input={\r\n                            <OutlinedInput\r\n                                labelWidth={this.state.labelWidth}\r\n                                name=\"subject\"\r\n                                id=\"outlined-asubject-simple\"\r\n                            />\r\n                        }\r\n                    >\r\n                        <MenuItem value=\"1\">\r\n                            <em>科目</em>\r\n                        </MenuItem>\r\n                        {(this.state.classData).map((n, index) => {\r\n                                return (\r\n                                    <MenuItem key={n.id}value={n}>{n}</MenuItem>\r\n                                );\r\n                            })}\r\n                    </Select>\r\n                </FormControl>\r\n                <FormControl variant=\"outlined\" className={classes.formControl}>\r\n                    <InputLabel\r\n                        ref={ref => {\r\n                            this.InputLabelRef = ref;\r\n                        }}\r\n                        htmlFor=\"outlined-myclass-simple\"\r\n                    >\r\n                        班別\r\n                    </InputLabel>\r\n                    <Select\r\n                        value={this.state.myclass}\r\n                        //onChange={this.handleChange}\r\n                        onChange={this.handleChange('myclass')}\r\n                        input={\r\n                            <OutlinedInput\r\n                                labelWidth={this.state.labelWidth}\r\n                                name=\"myclass\"\r\n                                id=\"outlined-asubject-simple\"\r\n                            />\r\n                        }\r\n                    >\r\n                        <MenuItem value=\"\">\r\n                            <em>班別</em>\r\n                        </MenuItem>\r\n                        {(this.state.data).map((n, index) => {\r\n                                return (\r\n                                    <MenuItem key={n.id} value={n.class_id}>{n.class_id}</MenuItem>\r\n                                );\r\n                            })}\r\n                    </Select>\r\n                </FormControl>\r\n                <Button variant=\"outlined\" size='large' onClick={this.handleClick} className={classes.button}>搜尋</Button>\r\n            </form>\r\n        );\r\n    }\r\n}\r\n\r\nSimpleSelect.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(SimpleSelect);\r\n"]},"metadata":{},"sourceType":"module"}