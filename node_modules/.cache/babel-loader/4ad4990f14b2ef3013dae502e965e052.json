{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\src\\\\components\\\\Login\\\\LoginAccount.js\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'redux';\nimport { withRouter } from 'react-router-dom';\nimport { withStyles } from '@material-ui/core/styles';\nimport '../Login/Login.css';\nimport TextField from '@material-ui/core/TextField';\nimport Airtable from 'airtable';\nvar TABLE_NAME = 'Account';\nvar base = new Airtable({\n  apiKey: 'keyA7EKdngjou4Dgy'\n}).base('appcXtOTPnE4QWIIt');\nvar table = base(TABLE_NAME);\n\nvar styles = function styles(theme) {\n  return {\n    container: {},\n    textField: {\n      width: 240,\n      marginLeft: theme.spacing.unit // marginRight: theme.spacing.unit,\n\n    }\n  };\n};\n\nfunction createData(account_id, account_passwd) {\n  return {\n    account_id: account_id,\n    account_passwd: account_passwd\n  };\n}\n\nvar OutlinedTextFields =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(OutlinedTextFields, _React$Component);\n\n  function OutlinedTextFields(props) {\n    var _this;\n\n    _classCallCheck(this, OutlinedTextFields);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(OutlinedTextFields).call(this, props));\n\n    _this.handleClick = function (e) {\n      _this.setState({\n        error: false,\n        errorMessage: ''\n      });\n    };\n\n    _this.handleChange = function (event) {\n      _this.setState(_defineProperty({}, event.target.id, event.target.value));\n    };\n\n    _this.handleSubmit = function (event) {\n      event.preventDefault();\n      console.log(_this.state.account);\n      console.log(_this.state.userData);\n\n      for (var index = 0; index < _this.state.userData.length; index++) {\n        if (_this.state.account === _this.state.userData[index].account_id && _this.state.password === _this.state.userData[index].account_passwd) {\n          console.log(\"enter\");\n\n          _this.setState({\n            enter: true\n          });\n\n          _this.props.history.replace('/');\n        } else {\n          _this.setState({\n            error: true,\n            errorMessage: '帳號密碼錯誤'\n          });\n        }\n      }\n    };\n\n    _this.state = {\n      account: \"\",\n      password: \"\",\n      userData: [],\n      error: false,\n      errorMessage: '',\n      enter: false\n    };\n    return _this;\n  }\n\n  _createClass(OutlinedTextFields, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      table.select({\n        //filterByFormula: 'AND(student_id = 405401369)',\n        view: \"Grid view\"\n      }).eachPage(function (records, fetchNextPage) {\n        _this2.setState({\n          records: records\n        });\n\n        console.log(records);\n\n        var account_id = _this2.state.records.map(function (record, index) {\n          return record.fields['account_id'];\n        });\n\n        var account_passwd = _this2.state.records.map(function (record, index) {\n          return record.fields['account_passwd'];\n        }); // This function (`page`) will get called for each page of records.\n\n\n        var count = account_id.length;\n        var temp = [];\n\n        for (var index = 0; index < count; index++) {\n          temp.push(createData(account_id[index], account_passwd[index]));\n        }\n\n        _this2.setState({\n          userData: temp\n        });\n\n        fetchNextPage();\n      });\n    }\n  }, {\n    key: \"validateForm\",\n    value: function validateForm() {\n      return this.state.account.length > 0 && this.state.password.length > 0;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          error = _this$state.error,\n          errorMessage = _this$state.errorMessage;\n      var classes = this.props.classes;\n      return React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        className: classes.container,\n        noValidate: true,\n        autoComplete: \"off\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        required: true //id=\"outlined-required\"\n        ,\n        id: \"account\",\n        label: \"\\u5E33\\u865F\",\n        error: error,\n        helperText: errorMessage,\n        value: this.state.account,\n        onClick: this.handleClick,\n        onChange: this.handleChange,\n        className: classes.textField,\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(TextField //id=\"outlined-password-input\"\n      , {\n        id: \"password\",\n        label: \"\\u5BC6\\u78BC\",\n        value: this.state.password,\n        className: classes.textField,\n        onChange: this.handleChange,\n        type: \"password\",\n        autoComplete: \"current-password\",\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"btn login-btn\",\n        type: \"submit\",\n        name: \"loginbutton\",\n        disabled: !this.validateForm(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, \"Log in\"))));\n    }\n  }]);\n\n  return OutlinedTextFields;\n}(React.Component);\n\nOutlinedTextFields.propTypes = {\n  classes: PropTypes.object.isRequired\n};\nexport default compose(withStyles(styles), withRouter)(OutlinedTextFields);","map":{"version":3,"sources":["C:\\Users\\耍廢社\\Desktop\\MyProject\\src\\components\\Login\\LoginAccount.js"],"names":["React","PropTypes","compose","withRouter","withStyles","TextField","Airtable","TABLE_NAME","base","apiKey","table","styles","theme","container","textField","width","marginLeft","spacing","unit","createData","account_id","account_passwd","OutlinedTextFields","props","handleClick","e","setState","error","errorMessage","handleChange","event","target","id","value","handleSubmit","preventDefault","console","log","state","account","userData","index","length","password","enter","history","replace","select","view","eachPage","records","fetchNextPage","map","record","fields","count","temp","push","classes","validateForm","Component","propTypes","object","isRequired"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { compose } from 'redux'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport '../Login/Login.css';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Airtable from 'airtable';\r\n\r\nconst TABLE_NAME = 'Account';\r\nconst base = new Airtable({ apiKey: 'keyA7EKdngjou4Dgy' }).base('appcXtOTPnE4QWIIt');\r\nconst table = base(TABLE_NAME);\r\n\r\nconst styles = theme => ({\r\n    container: {\r\n    },\r\n    textField: {\r\n        width: 240,\r\n        marginLeft: theme.spacing.unit,\r\n        // marginRight: theme.spacing.unit,\r\n    },\r\n});\r\n\r\nfunction createData(account_id, account_passwd) {\r\n    return { account_id, account_passwd };\r\n}\r\n\r\nclass OutlinedTextFields extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            account: \"\",\r\n            password: \"\",\r\n            userData: [],\r\n            error: false,\r\n            errorMessage: '',\r\n            enter:false,\r\n        };\r\n    }\r\n    \r\n    componentDidMount() {\r\n        table.select({\r\n            //filterByFormula: 'AND(student_id = 405401369)',\r\n            view: \"Grid view\"\r\n        }).eachPage((records, fetchNextPage) => {\r\n            this.setState({ records });\r\n            console.log(records);\r\n            const account_id = this.state.records.map((record, index) => record.fields['account_id']);\r\n            const account_passwd = this.state.records.map((record, index) => record.fields['account_passwd']);\r\n            // This function (`page`) will get called for each page of records.\r\n            var count = account_id.length;\r\n            var temp = [];\r\n            for (var index = 0; index < count; index++) {\r\n                temp.push(createData(account_id[index], account_passwd[index]));\r\n\r\n            }\r\n            this.setState({ userData: temp });\r\n            fetchNextPage();\r\n        }\r\n        );\r\n    }\r\n\r\n    validateForm() {\r\n        return this.state.account.length > 0 && this.state.password.length > 0;\r\n    }\r\n\r\n    handleClick = e =>{\r\n        this.setState({\r\n            error: false,\r\n            errorMessage:'',\r\n        })\r\n    }\r\n\r\n    handleChange = event => {\r\n        this.setState({\r\n            [event.target.id]: event.target.value,\r\n        });\r\n    }\r\n\r\n    handleSubmit = event => {\r\n        event.preventDefault();\r\n        console.log(this.state.account);\r\n        console.log(this.state.userData);\r\n\r\n        for (var index = 0; index < this.state.userData.length; index++) {\r\n            if (this.state.account === this.state.userData[index].account_id &&\r\n                this.state.password === this.state.userData[index].account_passwd) {\r\n                    console.log(\"enter\");\r\n                    this.setState({enter: true});\r\n                    this.props.history.replace('/')\r\n            } else {\r\n                this.setState({\r\n                    error: true,\r\n                    errorMessage:'帳號密碼錯誤'\r\n                })\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { error, errorMessage } = this.state\r\n        const { classes } = this.props;\r\n\r\n        return (\r\n            <form onSubmit={this.handleSubmit} className={classes.container} noValidate autoComplete=\"off\">\r\n                <div>\r\n                    <TextField\r\n                        required\r\n                        //id=\"outlined-required\"\r\n                        id='account'\r\n                        label=\"帳號\"\r\n                        error={error}\r\n                        helperText={errorMessage}\r\n                        value={this.state.account}\r\n                        onClick={this.handleClick}\r\n                        onChange={this.handleChange}\r\n                        className={classes.textField}\r\n                        margin=\"normal\"\r\n                        variant=\"outlined\"\r\n                    /></div>\r\n                <div>\r\n                    <TextField\r\n                        //id=\"outlined-password-input\"\r\n                        id='password'\r\n                        label=\"密碼\"\r\n                        value={this.state.password}\r\n                        className={classes.textField}\r\n                        onChange={this.handleChange}\r\n                        type=\"password\"\r\n                        autoComplete=\"current-password\"\r\n                        margin=\"normal\"\r\n                        variant=\"outlined\"\r\n                    /></div>\r\n                <div>\r\n                    <button className=\"btn login-btn\" type=\"submit\" name=\"loginbutton\" disabled={!this.validateForm()}>\r\n                        <span>Log in</span>\r\n                    </button>\r\n                </div>\r\n            </form>\r\n        );\r\n    }\r\n}\r\n\r\nOutlinedTextFields.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default compose(\r\n    withStyles(styles),\r\n    withRouter\r\n)(OutlinedTextFields);\r\n"]},"metadata":{},"sourceType":"module"}