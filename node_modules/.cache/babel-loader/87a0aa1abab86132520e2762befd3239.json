{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\src\\\\components\\\\Course\\\\CourseTable.js\";\nimport React from \"react\";\nimport classNames from \"classnames\";\nimport PropTypes from \"prop-types\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport { lighten } from \"@material-ui/core/styles/colorManipulator\";\nimport { fetchDeleteCourse } from '../../api';\nimport Airtable from 'airtable';\nvar base = new Airtable({\n  apiKey: 'keyA7EKdngjou4Dgy'\n}).base('appcXtOTPnE4QWIIt');\nvar tableClass = base('ClassDay');\nvar tableTeacher = base('Teacher');\nvar tableClassRoom = base('ClassRoom');\n\nfunction sleep(time) {\n  return new Promise(function (resolve) {\n    return setTimeout(resolve, time);\n  });\n}\n\nvar counter = 0;\n\nfunction createData(course, teacher, classroom, day, time, area, record_id) {\n  counter += 1;\n  return {\n    id: counter,\n    course: course,\n    teacher: teacher,\n    classroom: classroom,\n    day: day,\n    time: time,\n    area: area,\n    record_id: record_id\n  };\n}\n\nvar rows = [{\n  id: \"course\",\n  numeric: false,\n  disablePadding: true,\n  label: \"課程名稱\"\n}, {\n  id: \"teacher\",\n  numeric: true,\n  disablePadding: false,\n  label: \"授課老師\"\n}, {\n  id: \"classroom\",\n  numeric: true,\n  disablePadding: false,\n  label: \"教室\"\n}, {\n  id: \"day\",\n  numeric: true,\n  disablePadding: false,\n  label: \"星期\"\n}, {\n  id: \"time\",\n  numeric: true,\n  disablePadding: false,\n  label: \"時間\"\n}];\n\nvar EnhancedTableHead =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(EnhancedTableHead, _React$Component);\n\n  function EnhancedTableHead() {\n    _classCallCheck(this, EnhancedTableHead);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(EnhancedTableHead).apply(this, arguments));\n  }\n\n  _createClass(EnhancedTableHead, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          onSelectAllClick = _this$props.onSelectAllClick,\n          numSelected = _this$props.numSelected,\n          rowCount = _this$props.rowCount;\n      return React.createElement(TableHead, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, React.createElement(TableRow, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, React.createElement(TableCell, {\n        padding: \"checkbox\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, React.createElement(Checkbox, {\n        indeterminate: numSelected > 0 && numSelected < rowCount,\n        checked: numSelected === rowCount,\n        onChange: onSelectAllClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      })), rows.map(function (row) {\n        return React.createElement(TableCell, {\n          style: {\n            fontSize: '16pt'\n          },\n          key: row.id,\n          align: row.numeric ? \"center\" : \"left\",\n          padding: row.disablePadding ? \"none\" : \"default\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 70\n          },\n          __self: this\n        }, row.label);\n      }, this)));\n    }\n  }]);\n\n  return EnhancedTableHead;\n}(React.Component);\n\nEnhancedTableHead.propTypes = {\n  numSelected: PropTypes.number.isRequired,\n  onRequestSort: PropTypes.func.isRequired,\n  onSelectAllClick: PropTypes.func.isRequired,\n  rowCount: PropTypes.number.isRequired\n};\n\nvar toolbarStyles = function toolbarStyles(theme) {\n  return {\n    root: {\n      paddingRight: theme.spacing.unit,\n      backgroundColor: '#FFBF5F'\n    },\n    highlight: theme.palette.type === \"main\" ? {\n      color: theme.palette.secondary.main,\n      backgroundColor: lighten(theme.palette.primary.main, 0.85)\n    } : {\n      color: theme.palette.text.primary,\n      backgroundColor: theme.palette.secondary.dark\n    },\n    spacer: {\n      flex: \"1 1 100%\"\n    },\n    title: {\n      flex: \"0 0 auto\"\n    }\n  };\n};\n\nvar EnhancedTableToolbar =\n/*#__PURE__*/\nfunction (_React$Component2) {\n  _inherits(EnhancedTableToolbar, _React$Component2);\n\n  function EnhancedTableToolbar() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, EnhancedTableToolbar);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(EnhancedTableToolbar)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.handleDelete = function (e) {\n      for (var index = 0; index < _this.props.toDelete.length; index++) {\n        fetchDeleteCourse(_this.props.toDelete[index].id);\n      }\n\n      sleep(500).then(function () {\n        window.location.reload();\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(EnhancedTableToolbar, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          numSelected = _this$props2.numSelected,\n          classes = _this$props2.classes;\n      return React.createElement(Toolbar, {\n        className: classNames(classes.root, _defineProperty({}, classes.highlight, numSelected > 0)),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: classes.title,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, numSelected > 0 ? React.createElement(Typography, {\n        color: \"inherit\",\n        variant: \"subtitle1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, \"\\u5DF2\\u9078\\u64C7 \", numSelected, \" \\u5802\\u8AB2\\u7A0B\") : React.createElement(Typography, {\n        style: {\n          color: '#111B24'\n        },\n        variant: \"h6\",\n        id: \"tableTitle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, \"\\u8AB2\\u7A0B\\u5217\\u8868\")), React.createElement(\"div\", {\n        className: classes.spacer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: classes.actions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, numSelected > 0 ? React.createElement(Tooltip, {\n        title: \"\\u522A\\u9664\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(IconButton, {\n        onClick: this.handleDelete,\n        \"aria-label\": \"\\u522A\\u9664\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(DeleteIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }))) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return EnhancedTableToolbar;\n}(React.Component);\n\nEnhancedTableToolbar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  numSelected: PropTypes.number.isRequired\n};\nEnhancedTableToolbar = withStyles(toolbarStyles)(EnhancedTableToolbar);\n\nvar styles = function styles(theme) {\n  return {\n    root: {\n      width: '80%',\n      minWidth: '900px',\n      margin: '0 auto',\n      marginTop: theme.spacing.unit,\n      backgroundColor: '#212832',\n      border: 'white 1px solid',\n      overflowX: 'auto'\n    },\n    table: {\n      minWidth: 800\n    },\n    tableWrapper: {\n      overflowX: \"auto\"\n    },\n    content: {\n      fontSize: '14pt'\n    }\n  };\n};\n\nvar EnhancedTable =\n/*#__PURE__*/\nfunction (_React$Component3) {\n  _inherits(EnhancedTable, _React$Component3);\n\n  function EnhancedTable() {\n    var _getPrototypeOf3;\n\n    var _this2;\n\n    _classCallCheck(this, EnhancedTable);\n\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    _this2 = _possibleConstructorReturn(this, (_getPrototypeOf3 = _getPrototypeOf(EnhancedTable)).call.apply(_getPrototypeOf3, [this].concat(args)));\n    _this2.state = {\n      selected: [],\n      data: [],\n      dataInit: [],\n      listNameFromParent: '',\n      deleted: []\n    };\n\n    _this2.handleSelectAllClick = function (event) {\n      if (event.target.checked) {\n        _this2.setState(function (state) {\n          return {\n            selected: state.data.map(function (n) {\n              return n.id;\n            })\n          };\n        });\n\n        return;\n      }\n\n      _this2.setState({\n        selected: []\n      });\n    };\n\n    _this2.handleClick = function (event, id, record_id) {\n      var _this2$state = _this2.state,\n          selected = _this2$state.selected,\n          deleted = _this2$state.deleted;\n      var selectedIndex = selected.indexOf(id);\n      var newSelected = [];\n      var newDeleted = [];\n\n      if (selectedIndex === -1) {\n        newSelected = newSelected.concat(selected, id);\n        newDeleted = newDeleted.concat(deleted, record_id);\n      } else if (selectedIndex === 0) {\n        newSelected = newSelected.concat(selected.slice(1));\n        newDeleted = newDeleted.concat(deleted.slice(1));\n      } else if (selectedIndex === selected.length - 1) {\n        newSelected = newSelected.concat(selected.slice(0, -1));\n        newDeleted = newDeleted.concat(deleted.slice(0, -1));\n      } else if (selectedIndex > 0) {\n        newSelected = newSelected.concat(selected.slice(0, selectedIndex), selected.slice(selectedIndex + 1));\n        newDeleted = newDeleted.concat(deleted.slice(0, selectedIndex), deleted.slice(selectedIndex + 1));\n      }\n\n      _this2.setState({\n        deleted: newDeleted\n      });\n\n      _this2.setState({\n        selected: newSelected\n      });\n    };\n\n    _this2.isSelected = function (id) {\n      return _this2.state.selected.indexOf(id) !== -1;\n    };\n\n    return _this2;\n  }\n\n  _createClass(EnhancedTable, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.listNameFromParent !== this.state.listNameFromParent) {\n        var count = this.state.dataInit.length;\n        var temp = [];\n\n        for (var index = 0; index < count; index++) {\n          if (nextProps.listNameFromParent === this.state.dataInit[index].area) {\n            temp.push(this.state.dataInit[index]);\n            this.setState({\n              data: temp\n            });\n          }\n        }\n\n        this.setState({\n          listNameFromParent: nextProps.listNameFromParent\n        });\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this3 = this;\n\n      //classDay table\n      tableClass.select({\n        view: \"Grid view\" //maxRecords: 1\n\n      }).eachPage(function (records, fetchNextPage) {\n        _this3.setState({\n          records: records\n        });\n\n        var classroom_id_link = _this3.state.records.map(function (record, index) {\n          return record.fields['classroom_id_link'];\n        });\n\n        var class_id = _this3.state.records.map(function (record, index) {\n          return record.fields['class_id'];\n        });\n\n        var class_day = _this3.state.records.map(function (record, index) {\n          return record.fields['class_day'];\n        });\n\n        var class_start_time = _this3.state.records.map(function (record, index) {\n          return record.fields['class_start_time'];\n        });\n\n        var classroom_id = _this3.state.records.map(function (record, index) {\n          return record.fields['classroom_id'];\n        });\n\n        var teacher_id = _this3.state.records.map(function (record, index) {\n          return record.fields['teacher_id'];\n        });\n\n        var record_id = _this3.state.records.map(function (record, index) {\n          return record.id;\n        }); //const class_end_time = this.state.records.map((record, index) => record.fields['class_end_time']);\n        //console.log(record_id);\n\n\n        var temp = [];\n        var count = teacher_id.length;\n\n        var _loop = function _loop() {\n          var teacher_idR = teacher_id[index];\n          var record_id_room = classroom_id_link[index];\n          var class_idR = class_id[index];\n          var class_dayR = class_day[index];\n          var class_start_timeR = class_start_time[index];\n          var classroom_idR = classroom_id[index];\n          var record_idR = record_id[index]; //const class_end_timeR = class_end_time[index];\n          //teacher Name\n\n          tableTeacher.find(teacher_idR, function (err, record) {\n            if (err) {\n              console.error(err);\n              return;\n            }\n\n            var teacher_name = record.fields['teacher_name']; //temp.push(createData(class_idR, teacher_name, classroom_idR, class_dayR, class_start_timeR));\n\n            tableClassRoom.find(record_id_room, function (err, record) {\n              if (err) {\n                console.error(err);\n                return;\n              }\n\n              var class_area = record.fields['class_area'];\n              temp.push(createData(class_idR, teacher_name, classroom_idR, class_dayR, class_start_timeR, class_area, record_idR));\n            });\n          });\n        };\n\n        for (var index = 0; index < count; index++) {\n          _loop();\n        }\n\n        _this3.setState({\n          data: temp\n        });\n\n        _this3.setState({\n          dataInit: temp\n        }); //console.log(this.props.listNameFromParent);\n\n\n        fetchNextPage();\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var classes = this.props.classes;\n      var _this$state = this.state,\n          data = _this$state.data,\n          selected = _this$state.selected,\n          deleted = _this$state.deleted;\n      return React.createElement(Paper, {\n        className: classes.root,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321\n        },\n        __self: this\n      }, React.createElement(EnhancedTableToolbar, {\n        numSelected: selected.length,\n        toDelete: deleted,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: classes.tableWrapper,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323\n        },\n        __self: this\n      }, React.createElement(Table, {\n        className: classes.table,\n        \"aria-labelledby\": \"tableTitle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324\n        },\n        __self: this\n      }, React.createElement(EnhancedTableHead, {\n        numSelected: selected.length,\n        onSelectAllClick: this.handleSelectAllClick,\n        rowCount: data.length,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325\n        },\n        __self: this\n      }), React.createElement(TableBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330\n        },\n        __self: this\n      }, data.map(function (n) {\n        var isSelected = _this4.isSelected(n.id);\n\n        return React.createElement(TableRow, {\n          hover: true,\n          role: \"checkbox\",\n          key: n.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 334\n          },\n          __self: this\n        }, React.createElement(TableCell, {\n          padding: \"checkbox\",\n          onClick: function onClick(event) {\n            return _this4.handleClick(event, n.id, n.record_id);\n          },\n          \"aria-checked\": isSelected,\n          tabIndex: -1,\n          selected: isSelected,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 339\n          },\n          __self: this\n        }, React.createElement(Checkbox, {\n          checked: isSelected,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 346\n          },\n          __self: this\n        })), React.createElement(TableCell, {\n          className: classes.content,\n          component: \"th\",\n          scope: \"row\",\n          padding: \"none\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 348\n          },\n          __self: this\n        }, n.course), React.createElement(TableCell, {\n          className: classes.content,\n          align: \"center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 351\n          },\n          __self: this\n        }, n.teacher), React.createElement(TableCell, {\n          className: classes.content,\n          align: \"center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 352\n          },\n          __self: this\n        }, n.classroom), React.createElement(TableCell, {\n          className: classes.content,\n          align: \"center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 353\n          },\n          __self: this\n        }, n.day), React.createElement(TableCell, {\n          className: classes.content,\n          align: \"center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 354\n          },\n          __self: this\n        }, n.time));\n      })))));\n    }\n  }]);\n\n  return EnhancedTable;\n}(React.Component);\n\nEnhancedTable.propTypes = {\n  classes: PropTypes.object.isRequired\n};\nexport default withStyles(styles)(EnhancedTable);","map":{"version":3,"sources":["C:\\Users\\耍廢社\\Desktop\\MyProject\\src\\components\\Course\\CourseTable.js"],"names":["React","classNames","PropTypes","withStyles","Table","TableBody","TableCell","TableHead","TableRow","Toolbar","Typography","Paper","Checkbox","IconButton","Tooltip","DeleteIcon","lighten","fetchDeleteCourse","Airtable","base","apiKey","tableClass","tableTeacher","tableClassRoom","sleep","time","Promise","resolve","setTimeout","counter","createData","course","teacher","classroom","day","area","record_id","id","rows","numeric","disablePadding","label","EnhancedTableHead","props","onSelectAllClick","numSelected","rowCount","map","row","fontSize","Component","propTypes","number","isRequired","onRequestSort","func","toolbarStyles","theme","root","paddingRight","spacing","unit","backgroundColor","highlight","palette","type","color","secondary","main","primary","text","dark","spacer","flex","title","EnhancedTableToolbar","handleDelete","e","index","toDelete","length","then","window","location","reload","classes","actions","object","styles","width","minWidth","margin","marginTop","border","overflowX","table","tableWrapper","content","EnhancedTable","state","selected","data","dataInit","listNameFromParent","deleted","handleSelectAllClick","event","target","checked","setState","n","handleClick","selectedIndex","indexOf","newSelected","newDeleted","concat","slice","isSelected","nextProps","count","temp","push","select","view","eachPage","records","fetchNextPage","classroom_id_link","record","fields","class_id","class_day","class_start_time","classroom_id","teacher_id","teacher_idR","record_id_room","class_idR","class_dayR","class_start_timeR","classroom_idR","record_idR","find","err","console","error","teacher_name","class_area"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport classNames from \"classnames\";\r\nimport PropTypes from \"prop-types\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport { lighten } from \"@material-ui/core/styles/colorManipulator\";\r\nimport { fetchDeleteCourse } from '../../api';\r\n\r\nimport Airtable from 'airtable';\r\n\r\nconst base = new Airtable({ apiKey: 'keyA7EKdngjou4Dgy' }).base('appcXtOTPnE4QWIIt');\r\nconst tableClass = base('ClassDay');\r\nconst tableTeacher = base('Teacher');\r\nconst tableClassRoom = base('ClassRoom');\r\n\r\nfunction sleep (time) {\r\n    return new Promise((resolve) => setTimeout(resolve, time));\r\n}\r\n\r\nlet counter = 0;\r\nfunction createData(course, teacher, classroom, day, time, area, record_id) {\r\n    counter += 1;\r\n    return { id: counter, course, teacher, classroom, day, time, area, record_id };\r\n}\r\n\r\nconst rows = [\r\n    {\r\n        id: \"course\",\r\n        numeric: false,\r\n        disablePadding: true,\r\n        label: \"課程名稱\"\r\n    },\r\n    { id: \"teacher\", numeric: true, disablePadding: false, label: \"授課老師\" },\r\n    { id: \"classroom\", numeric: true, disablePadding: false, label: \"教室\" },\r\n    { id: \"day\", numeric: true, disablePadding: false, label: \"星期\" },\r\n    { id: \"time\", numeric: true, disablePadding: false, label: \"時間\" }\r\n];\r\n\r\nclass EnhancedTableHead extends React.Component {\r\n    render() {\r\n        const {\r\n            onSelectAllClick,\r\n            numSelected,\r\n            rowCount\r\n        } = this.props;\r\n\r\n        return (\r\n            <TableHead>\r\n                <TableRow>\r\n                    <TableCell padding=\"checkbox\">\r\n                        <Checkbox\r\n                            indeterminate={numSelected > 0 && numSelected < rowCount}\r\n                            checked={numSelected === rowCount}\r\n                            onChange={onSelectAllClick}\r\n                        />\r\n                    </TableCell>\r\n                    {rows.map(\r\n                        row => (\r\n                            <TableCell style={{ fontSize: '16pt' }}\r\n                                key={row.id}\r\n                                align={row.numeric ? \"center\" : \"left\"}\r\n                                padding={row.disablePadding ? \"none\" : \"default\"}\r\n                            >\r\n                                {row.label}\r\n                            </TableCell>\r\n                        ),\r\n                        this\r\n                    )}\r\n                </TableRow>\r\n            </TableHead>\r\n        );\r\n    }\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n    numSelected: PropTypes.number.isRequired,\r\n    onRequestSort: PropTypes.func.isRequired,\r\n    onSelectAllClick: PropTypes.func.isRequired,\r\n    rowCount: PropTypes.number.isRequired\r\n};\r\n\r\nconst toolbarStyles = theme => ({\r\n    root: {\r\n        paddingRight: theme.spacing.unit,\r\n        backgroundColor: '#FFBF5F',\r\n    },\r\n    highlight:\r\n        theme.palette.type === \"main\"\r\n            ? {\r\n                color: theme.palette.secondary.main,\r\n                backgroundColor: lighten(theme.palette.primary.main, 0.85)\r\n            }\r\n            : {\r\n                color: theme.palette.text.primary,\r\n                backgroundColor: theme.palette.secondary.dark\r\n            },\r\n    spacer: {\r\n        flex: \"1 1 100%\"\r\n    },\r\n    title: {\r\n        flex: \"0 0 auto\",\r\n    }\r\n});\r\n\r\nclass EnhancedTableToolbar extends React.Component  {\r\n\r\n    handleDelete = e => {\r\n        for(var index = 0; index < this.props.toDelete.length; index++){\r\n            fetchDeleteCourse(this.props.toDelete[index].id);\r\n        }\r\n        sleep(500).then(() => {\r\n            window.location.reload();\r\n        })\r\n\r\n    }\r\n    render(){\r\n        const { numSelected, classes } = this.props;\r\n    return (\r\n        <Toolbar\r\n            className={classNames(classes.root, {\r\n                    [classes.highlight]: numSelected > 0\r\n                })}\r\n        >\r\n            <div className={classes.title}>\r\n                {numSelected > 0\r\n                    ? (\r\n                        <Typography color=\"inherit\" variant=\"subtitle1\">\r\n                            已選擇 {numSelected} 堂課程\r\n                    </Typography>)\r\n                    : (\r\n                        <Typography style={{ color: '#111B24' }} variant=\"h6\" id=\"tableTitle\">\r\n                            課程列表\r\n                    </Typography>\r\n                    )\r\n                }\r\n            </div>\r\n            <div className={classes.spacer} />\r\n            <div className={classes.actions}>\r\n                {numSelected > 0 ? (\r\n                    <Tooltip title=\"刪除\">\r\n                        <IconButton onClick={this.handleDelete} aria-label=\"刪除\">\r\n                            <DeleteIcon />\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                ) : (\r\n                        <div></div>\r\n                    )}\r\n            </div>\r\n        </Toolbar>\r\n    );\r\n};\r\n}\r\n\r\nEnhancedTableToolbar.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    numSelected: PropTypes.number.isRequired\r\n};\r\n\r\nEnhancedTableToolbar = withStyles(toolbarStyles)(EnhancedTableToolbar);\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        width: '80%',\r\n        minWidth:'900px',\r\n        margin: '0 auto',\r\n        marginTop: theme.spacing.unit,\r\n        backgroundColor: '#212832',\r\n        border: 'white 1px solid',\r\n        overflowX: 'auto',\r\n    },\r\n    table: {\r\n        minWidth: 800\r\n    },\r\n    tableWrapper: {\r\n        overflowX: \"auto\"\r\n    },\r\n    content: {\r\n        fontSize: '14pt',\r\n    },\r\n});\r\n\r\nclass EnhancedTable extends React.Component {\r\n\r\n    state = {\r\n        selected: [],\r\n        data: [],\r\n        dataInit: [],\r\n        listNameFromParent: '',\r\n        deleted: [],\r\n    };\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.listNameFromParent !== this.state.listNameFromParent) {\r\n            var count = this.state.dataInit.length;\r\n            var temp = [];\r\n            for (var index = 0; index < count; index++) {\r\n                if (nextProps.listNameFromParent === this.state.dataInit[index].area) {\r\n                    temp.push(this.state.dataInit[index]);\r\n                    this.setState({ data: temp });\r\n                }\r\n            }\r\n            this.setState({ listNameFromParent: nextProps.listNameFromParent });\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n        //classDay table\r\n        tableClass.select({\r\n            view: \"Grid view\",\r\n            //maxRecords: 1\r\n        }).eachPage((records, fetchNextPage) => {\r\n            this.setState({ records });\r\n            const classroom_id_link = this.state.records.map((record, index) => record.fields['classroom_id_link']);\r\n            const class_id = this.state.records.map((record, index) => record.fields['class_id']);\r\n            const class_day = this.state.records.map((record, index) => record.fields['class_day']);\r\n            const class_start_time = this.state.records.map((record, index) => record.fields['class_start_time']);\r\n            const classroom_id = this.state.records.map((record, index) => record.fields['classroom_id']);\r\n            const teacher_id = this.state.records.map((record, index) => record.fields['teacher_id']);\r\n            const record_id = this.state.records.map((record, index) => record.id);\r\n            //const class_end_time = this.state.records.map((record, index) => record.fields['class_end_time']);\r\n            //console.log(record_id);\r\n\r\n            var temp = [];\r\n            var count = teacher_id.length;\r\n            for (var index = 0; index < count; index++) {\r\n                const teacher_idR = teacher_id[index];\r\n                const record_id_room = classroom_id_link[index];\r\n                const class_idR = class_id[index];\r\n                const class_dayR = class_day[index];\r\n                const class_start_timeR = class_start_time[index];\r\n                const classroom_idR = classroom_id[index];\r\n                const record_idR = record_id[index];\r\n                //const class_end_timeR = class_end_time[index];\r\n\r\n                //teacher Name\r\n                tableTeacher.find(teacher_idR, (err, record) => {\r\n                    if (err) {\r\n                        console.error(err)\r\n                        return\r\n                    }\r\n                    const teacher_name = record.fields['teacher_name'];\r\n                    //temp.push(createData(class_idR, teacher_name, classroom_idR, class_dayR, class_start_timeR));\r\n\r\n                    tableClassRoom.find(record_id_room, (err, record) => {\r\n                        if (err) {\r\n                            console.error(err)\r\n                            return\r\n                        }\r\n                        const class_area = record.fields['class_area'];\r\n                        temp.push(createData(class_idR, teacher_name, classroom_idR, class_dayR, class_start_timeR, class_area, record_idR));\r\n                    })\r\n                })\r\n\r\n\r\n\r\n            }\r\n            this.setState({ data: temp });\r\n            this.setState({ dataInit: temp });\r\n\r\n            //console.log(this.props.listNameFromParent);\r\n            fetchNextPage();\r\n        }\r\n        );\r\n    }\r\n\r\n    handleSelectAllClick = event => {\r\n        if (event.target.checked) {\r\n            this.setState(state => ({ selected: state.data.map(n => n.id) }));\r\n            return;\r\n        }\r\n        this.setState({ selected: [] });\r\n    };\r\n\r\n    handleClick = (event, id, record_id) => {\r\n        const { selected , deleted } = this.state;\r\n        const selectedIndex = selected.indexOf(id);\r\n        let newSelected = [];\r\n        let newDeleted = [];\r\n\r\n        if (selectedIndex === -1) {\r\n            newSelected = newSelected.concat(selected, id);\r\n            newDeleted = newDeleted.concat(deleted,  record_id);\r\n        } else if (selectedIndex === 0) {\r\n            newSelected = newSelected.concat(selected.slice(1));\r\n            newDeleted = newDeleted.concat(deleted.slice(1));\r\n        } else if (selectedIndex === selected.length - 1) {\r\n            newSelected = newSelected.concat(selected.slice(0, -1));\r\n            newDeleted = newDeleted.concat(deleted.slice(0, -1));\r\n        } else if (selectedIndex > 0) {\r\n            newSelected = newSelected.concat(\r\n                selected.slice(0, selectedIndex),\r\n                selected.slice(selectedIndex + 1) \r\n            );\r\n            newDeleted = newDeleted.concat(\r\n                deleted.slice(0, selectedIndex),\r\n                deleted.slice(selectedIndex + 1) \r\n            );\r\n        }\r\n        this.setState({ deleted: newDeleted });\r\n        this.setState({ selected: newSelected });\r\n    };\r\n    isSelected = id => this.state.selected.indexOf(id) !== -1;\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n        const { data, selected, deleted } = this.state;\r\n\r\n        return (\r\n            <Paper className={classes.root}>\r\n                <EnhancedTableToolbar numSelected={selected.length} toDelete={deleted}/>\r\n                <div className={classes.tableWrapper}>\r\n                    <Table className={classes.table} aria-labelledby=\"tableTitle\">\r\n                        <EnhancedTableHead\r\n                            numSelected={selected.length}\r\n                            onSelectAllClick={this.handleSelectAllClick}\r\n                            rowCount={data.length}\r\n                        />\r\n                        <TableBody>\r\n                            {data.map(n => {\r\n                                const isSelected = this.isSelected(n.id);\r\n                                return (\r\n                                    <TableRow\r\n                                        hover\r\n                                        role=\"checkbox\"\r\n                                        key={n.id}\r\n                                    >\r\n                                        <TableCell\r\n                                            padding=\"checkbox\"\r\n                                            onClick={event => this.handleClick(event, n.id, n.record_id)}\r\n                                            aria-checked={isSelected}\r\n                                            tabIndex={-1}\r\n                                            selected={isSelected}\r\n                                        >\r\n                                            <Checkbox checked={isSelected} />\r\n                                        </TableCell>\r\n                                        <TableCell className={classes.content} component=\"th\" scope=\"row\" padding=\"none\">\r\n                                            {n.course}\r\n                                        </TableCell>\r\n                                        <TableCell className={classes.content} align=\"center\">{n.teacher}</TableCell>\r\n                                        <TableCell className={classes.content} align=\"center\">{n.classroom}</TableCell>\r\n                                        <TableCell className={classes.content} align=\"center\">{n.day}</TableCell>\r\n                                        <TableCell className={classes.content} align=\"center\">{n.time}</TableCell>\r\n                                    </TableRow>\r\n                                );\r\n                            })}\r\n                        </TableBody>\r\n                    </Table>\r\n                </div>\r\n            </Paper>\r\n        );\r\n    }\r\n}\r\n\r\nEnhancedTable.propTypes = {\r\n    classes: PropTypes.object.isRequired\r\n};\r\n\r\nexport default withStyles(styles)(EnhancedTable);\r\n"]},"metadata":{},"sourceType":"module"}