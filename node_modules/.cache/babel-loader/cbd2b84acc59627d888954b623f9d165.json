{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\src\\\\components\\\\Classpage\\\\Gradepage.js\";\nimport React, { Component } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport Airtable from 'airtable';\nimport Todo from './Todo';\nvar TABLE_NAME = 'TestScore';\nvar base = new Airtable({\n  apiKey: 'keyA7EKdngjou4Dgy'\n}).base('appcXtOTPnE4QWIIt');\nvar table = base(TABLE_NAME);\nvar counter = 0;\n\nfunction createData(name) {\n  counter += 1;\n  return {\n    id: counter,\n    name: name\n  };\n}\n\nvar styles = function styles(theme) {\n  return {\n    input: {\n      backgroudColor: '#212832'\n    },\n    button: {}\n  };\n};\n\nvar Gradepage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Gradepage, _Component);\n\n  // 建構子，每個 class 第一次產生時都會執行到這邊\n  function Gradepage(props) {\n    var _this;\n\n    _classCallCheck(this, Gradepage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Gradepage).call(this, props)); // 這一行有點難解釋，想深入研究的麻煩自己查資料\n\n    _this.onClick = _this.onClick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onChange = _this.onChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.removeTodo = _this.removeTodo.bind(_assertThisInitialized(_assertThisInitialized(_this))); // 設定 state\n\n    _this.state = {\n      todos: [// { id: 1, name: '10/2 國文第一課', },\n        // { id: 2, name: '10/9 國文第二課', },\n        // { id: 3, name: '10/16 國文第三課', }\n      ]\n    };\n    return _this;\n  }\n\n  _createClass(Gradepage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      table.select({\n        view: \"Grid view\"\n      }).eachPage(function (records, fetchNextPage) {\n        _this2.setState({\n          records: records\n        }); //   const class_id = this.state.records.map((record, index) => record.fields['class_id']);\n        //   const test_score = this.state.records.map((record, index) => record.fields['test_score']);\n        //   const test_rank = this.state.records.map((record, index) => record.fields['test_rank']);\n\n\n        var test_name = _this2.state.records.map(function (record, index) {\n          return record.fields['test_name'];\n        });\n\n        var test_date = _this2.state.records.map(function (record, index) {\n          return record.fields['test_date'];\n        });\n\n        var record_id = _this2.state.records.map(function (record, index) {\n          return record.id;\n        });\n\n        var temp = [];\n        var temp2 = [];\n\n        for (var index = 0; index < test_name.length; index++) {\n          temp.push(test_date[index] + \" \" + test_name[index]);\n        }\n\n        var classResult = temp.filter(function (element, index, arr) {\n          return arr.indexOf(element) === index;\n        });\n\n        for (var index = 0; index < classResult.length; index++) {\n          temp2.push(createData(classResult[index]));\n        }\n\n        _this2.setState({\n          todos: temp2\n        });\n\n        fetchNextPage();\n      });\n    } // input 改變，設定 value\n\n  }, {\n    key: \"onChange\",\n    value: function onChange(e) {\n      this.setState({\n        text: e.target.value\n      });\n    }\n  }, {\n    key: \"onClick\",\n    value: function onClick() {\n      var _this$state = this.state,\n          todos = _this$state.todos,\n          text = _this$state.text;\n      var newId = todos[todos.length - 1].id + 1; // 設定 state\n\n      this.setState({\n        text: '',\n        todos: [].concat(_toConsumableArray(todos), [{\n          id: newId,\n          name: text\n        }])\n      });\n    }\n  }, {\n    key: \"removeTodo\",\n    value: function removeTodo(id) {\n      var todos = this.state.todos; // 直接用 filter 來把資料砍掉\n\n      var newTodos = todos.filter(function (item) {\n        return item.id !== id;\n      });\n      this.setState({\n        todos: newTodos // 這個為什麼不寫成 todos: newTodos 呢?\n\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      // 從 state 取出資料\n      var _this$state2 = this.state,\n          todos = _this$state2.todos,\n          text = _this$state2.text;\n      var classes = this.props.classes;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        value: text,\n        onChange: this.onChange,\n        className: classes.input,\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }), React.createElement(Button, {\n        className: classes.button,\n        onClick: this.onClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, \"\\u65B0\\u589E\\u6210\\u7E3E\")), todos.map(function (todo) {\n        return React.createElement(Todo, {\n          id: todo.id,\n          name: todo.name,\n          remove: _this3.removeTodo,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128\n          },\n          __self: this\n        });\n      }));\n    }\n  }]);\n\n  return Gradepage;\n}(Component);\n\nexport default withStyles(styles)(Gradepage);","map":{"version":3,"sources":["C:\\Users\\耍廢社\\Desktop\\MyProject\\src\\components\\Classpage\\Gradepage.js"],"names":["React","Component","withStyles","TextField","Button","Airtable","Todo","TABLE_NAME","base","apiKey","table","counter","createData","name","id","styles","theme","input","backgroudColor","button","Gradepage","props","onClick","bind","onChange","removeTodo","state","todos","select","view","eachPage","records","fetchNextPage","setState","test_name","map","record","index","fields","test_date","record_id","temp","temp2","length","push","classResult","filter","element","arr","indexOf","e","text","target","value","newId","newTodos","item","classes","todo"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport Airtable from 'airtable';\r\nimport Todo from './Todo';\r\n\r\nconst TABLE_NAME = 'TestScore';\r\nconst base = new Airtable({ apiKey: 'keyA7EKdngjou4Dgy' }).base('appcXtOTPnE4QWIIt');\r\nconst table = base(TABLE_NAME);\r\n\r\nlet counter = 0;\r\nfunction createData(name) {\r\n  counter += 1;\r\n  return { id: counter, name};\r\n}\r\n\r\nconst styles = theme => ({\r\n    input: {\r\n        backgroudColor: '#212832',\r\n    },\r\n    button: {\r\n    },\r\n});\r\n\r\nclass Gradepage extends Component {\r\n\r\n    // 建構子，每個 class 第一次產生時都會執行到這邊\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        // 這一行有點難解釋，想深入研究的麻煩自己查資料\r\n        this.onClick = this.onClick.bind(this);\r\n        this.onChange = this.onChange.bind(this);\r\n        this.removeTodo = this.removeTodo.bind(this);\r\n\r\n        // 設定 state\r\n        this.state = {\r\n            todos: [\r\n                // { id: 1, name: '10/2 國文第一課', },\r\n                // { id: 2, name: '10/9 國文第二課', },\r\n                // { id: 3, name: '10/16 國文第三課', }\r\n            ]\r\n        }\r\n    }\r\n    componentDidMount(){\r\n        table.select({\r\n            view: \"Grid view\"\r\n            }).eachPage((records, fetchNextPage) => {\r\n                this.setState({records});\r\n            //   const class_id = this.state.records.map((record, index) => record.fields['class_id']);\r\n            //   const test_score = this.state.records.map((record, index) => record.fields['test_score']);\r\n            //   const test_rank = this.state.records.map((record, index) => record.fields['test_rank']);\r\n                const test_name = this.state.records.map((record, index) => record.fields['test_name']);\r\n                const test_date = this.state.records.map((record, index) => record.fields['test_date']);\r\n                const record_id = this.state.records.map((record, index) => record.id);\r\n        \r\n                var temp=[];\r\n                var temp2=[];\r\n                for(var index = 0; index < test_name.length; index++) {\r\n                    temp.push(test_date[index] +\" \"+ test_name[index]);\r\n                }\r\n                var classResult = temp.filter(function(element, index, arr){\r\n                    return arr.indexOf(element) === index;\r\n                });\r\n                for(var index = 0; index < classResult.length; index++){\r\n                    temp2.push(createData(classResult[index]));\r\n                }\r\n                this.setState({ todos : temp2 });\r\n              fetchNextPage(); \r\n            }\r\n            );\r\n    }\r\n\r\n    // input 改變，設定 value\r\n    onChange(e) {\r\n        this.setState({\r\n            text: e.target.value\r\n        })\r\n    }\r\n\r\n    onClick() {\r\n        const { todos, text } = this.state;\r\n        const newId = todos[todos.length - 1].id + 1;\r\n        // 設定 state\r\n        this.setState({\r\n            text: '',\r\n            todos: [\r\n                ...todos,\r\n                { id: newId, name: text }\r\n            ]\r\n        })\r\n    }\r\n\r\n    removeTodo(id) {\r\n        const { todos } = this.state;\r\n\r\n        // 直接用 filter 來把資料砍掉\r\n        let newTodos = todos.filter((item) => item.id !== id);\r\n\r\n        this.setState({\r\n            todos: newTodos // 這個為什麼不寫成 todos: newTodos 呢?\r\n        })\r\n    }\r\n\r\n    render() {\r\n\r\n        // 從 state 取出資料\r\n        const { todos, text } = this.state;\r\n        const { classes } = this.props;\r\n\r\n        return (\r\n            <div>\r\n                <div>\r\n                    <TextField\r\n                        value={text}\r\n                        onChange={this.onChange}\r\n                        className={classes.input}\r\n                        margin=\"normal\"\r\n                        variant=\"outlined\"\r\n                    />\r\n                    <Button className={classes.button} onClick={this.onClick}>新增成績</Button>\r\n                    {/* <input className={classes.input} name=\"name\" type=\"text\" value={text} onChange={this.onChange} /> */}\r\n                </div>\r\n                {/* <button onClick={this.onClick}>Add item</button> */}\r\n                {\r\n                    todos.map((todo) => (\r\n                        <Todo\r\n                            id={todo.id}\r\n                            name={todo.name}\r\n                            remove={this.removeTodo} />\r\n                    ))\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(Gradepage);"]},"metadata":{},"sourceType":"module"}