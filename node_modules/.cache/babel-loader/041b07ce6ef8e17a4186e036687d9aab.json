{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\src\\\\components\\\\Apply\\\\ApplyForm.js\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport Myclass from './ApplyFormClass';\nimport { Card, Button } from '@material-ui/core';\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport CameraIcon from '@material-ui/icons/CameraAltRounded';\nimport noTrain from './noTrain.jpg';\nimport { fetchPostStudent, fetchPostClassMember } from '../../api';\nimport axios from 'axios'; // var Airtable = require('airtable');\n\nvar IP = \"http://localhost:8080\";\n\nvar styles = function styles(theme) {\n  return {\n    root: {\n      margin: 'auto',\n      width: '40%'\n    },\n    container: {\n      color: 'white'\n    },\n    photo: {\n      width: '200px',\n      height: '200px',\n      marginLeft: '38%',\n      marginTop: theme.spacing.unit * 10\n    },\n    input: {\n      outline: 'none',\n      opacity: 0,\n      width: '47%'\n    },\n    train: {\n      marginTop: theme.spacing.unit * 2\n    },\n    button: {\n      display: 'flex',\n      border: '1px #FFBF5F solid',\n      borderRadius: '30px',\n      color: '#FFBF5F',\n      margin: 'auto'\n    },\n    rightIcon: {\n      marginLeft: theme.spacing.unit\n    },\n    textFieldLeft: {\n      marginLeft: '14%',\n      marginTop: theme.spacing.unit * 2,\n      color: 'white',\n      width: '260px'\n    },\n    textFieldRight: {\n      marginLeft: theme.spacing.unit * 6,\n      marginTop: theme.spacing.unit * 2,\n      color: 'white',\n      width: '260px'\n    },\n    textFieldFull: {\n      marginLeft: '14%',\n      marginTop: theme.spacing.unit * 2,\n      color: 'white',\n      width: '570px'\n    },\n    form: {\n      width: '800px',\n      margin: 'auto'\n    }\n  };\n};\n\nvar OutlinedTextFields =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(OutlinedTextFields, _React$Component);\n\n  function OutlinedTextFields(props) {\n    var _this;\n\n    _classCallCheck(this, OutlinedTextFields);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(OutlinedTextFields).call(this, props));\n\n    _this.myCallback = function (dataFromChild) {\n      _this.setState({\n        class_id: dataFromChild\n      });\n    };\n\n    _this.handleChange = function (name) {\n      return function (event) {\n        _this.setState(_defineProperty({}, name, event.target.value)); //console.log(this.state);\n\n      };\n    };\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n      var data = {\n        fields: {\n          student_name: {},\n          student_id: {},\n          student_grade: {},\n          student_phone: {},\n          student_birth: {},\n          student_school: {},\n          student_email: {},\n          student_parent: {},\n          student_parent_phone: {},\n          student_address: {},\n          student_img: {}\n        }\n      };\n      data.fields.student_name = _this.state.student_name;\n      data.fields.student_id = _this.state.student_id;\n      data.fields.student_grade = _this.state.student_grade;\n      data.fields.student_phone = _this.state.student_phone;\n      data.fields.student_birth = _this.state.student_birth;\n      data.fields.student_school = _this.state.student_school;\n      data.fields.student_email = _this.state.student_email;\n      data.fields.student_parent = _this.state.student_parent;\n      data.fields.student_parent_phone = _this.state.student_parent_phone;\n      data.fields.student_address = _this.state.student_address;\n      data.fields.student_img = [{\n        \"url\": _this.state.imgUrl\n      }];\n      console.log(data);\n\n      if (_this.state.student_name !== '' && _this.state.student_id !== '') {\n        fetchPostStudent(data);\n        var memberData = {\n          fields: {\n            class_id: {},\n            student_id: {}\n          }\n        };\n        var count = _this.state.class_id.length;\n\n        for (var index = 0; index < count; index++) {\n          memberData.fields.student_id = _this.state.student_id;\n          memberData.fields.class_id = _this.state.class_id[index];\n        }\n\n        fetchPostClassMember(memberData);\n      } else {\n        if (_this.state.student_name === '') {\n          _this.setState({\n            error1: true,\n            errorMessage1: '*此欄位必填'\n          });\n        } else if (_this.state.student_id === '') {\n          _this.setState({\n            error2: true,\n            errorMessage2: '*此欄位必填'\n          });\n        }\n      }\n    };\n\n    _this.handleFocus = function (e) {\n      _this.setState({\n        error1: false,\n        error2: false,\n        errorMessage1: '',\n        errorMessage2: ''\n      });\n    };\n\n    _this.handleClick = function () {\n      axios.create({\n        baseURL: IP,\n        headers: {\n          'content-type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      }).get(\"/retrieveface\").then(function (response) {\n        console.log(\"in response\");\n        console.log('open :', response.status, '\\nopen camera', new Date());\n      }).catch(function (error) {\n        return console.error(error);\n      });\n    };\n\n    _this.handleUpload = function (e) {\n      e.preventDefault(); ////\n\n      var file = e.target.files[0];\n      var formimg = new FormData();\n      var id = '4a951eb39b49f41'; // 填入 App 的 Client ID\n\n      formimg.append('image', file); //required\n\n      formimg.append('title', 'test'); //optional\n\n      formimg.append('description', 'test'); //optional\n\n      axios({\n        method: 'POST',\n        url: 'https://api.imgur.com/3/image',\n        data: formimg,\n        headers: {\n          'Content-Type': 'multipart/form-data',\n          'authorization': 'Client-ID ' + id\n        },\n        mimeType: 'multipart/form-data'\n      }).then(function (res) {\n        console.log(res); //console.log(res.data.data.link);\n\n        _this.setState({\n          imgUrl: res.data.data.link\n        });\n      }).catch(function (e) {\n        console.log(e);\n      }); ////\n\n      var formdata = new FormData();\n      formdata.append('file', file);\n      formdata.set('faceid', _this.state.student_id);\n      axios({\n        method: 'post',\n        url: 'http://localhost:8080/train',\n        data: formdata,\n        config: {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        }\n      }).then(function (response) {\n        console.log(\"in upload\");\n      }).catch(function (error) {\n        return console.error(error);\n      });\n    };\n\n    _this.handleClickOpen = function () {\n      _this.setState({\n        open: true\n      });\n    };\n\n    _this.handleClose = function () {\n      _this.setState({\n        open: false\n      });\n    };\n\n    _this.state = {\n      class_id: null,\n      stu_img: noTrain,\n      student_name: '',\n      student_id: '',\n      student_grade: '',\n      student_phone: '',\n      student_birth: '1998-07-13',\n      student_school: '',\n      student_email: '',\n      student_parent: '',\n      student_parent_phone: '',\n      student_address: '',\n      error1: false,\n      error2: false,\n      errorMessage1: '',\n      errorMessage2: '',\n      imgUrl: '',\n      open: false\n    };\n    return _this;\n  } //https://medium.com/@ruthmpardee/passing-data-between-react-components-103ad82ebd17\n\n\n  _createClass(OutlinedTextFields, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      console.log(this.state);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          error1 = _this$state.error1,\n          error2 = _this$state.error2,\n          errorMessage1 = _this$state.errorMessage1,\n          errorMessage2 = _this$state.errorMessage2;\n      var classes = this.props.classes;\n      return React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        className: classes.container,\n        noValidate: true,\n        autoComplete: \"off\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          width: '100%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        className: classes.photo,\n        src: this.state.stu_img,\n        alt: \"location\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }), React.createElement(Button, {\n        className: classes.button,\n        onClick: this.handleClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, \"Open Camera\", React.createElement(CameraIcon, {\n        className: classes.rightIcon,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: classes.train,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"file\",\n        name: \"file\",\n        ref: \"file\",\n        id: \"contained-button-file\",\n        onChange: this.handleUpload,\n        className: classes.input,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        htmlFor: \"contained-button-file\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      }, React.createElement(Button, {\n        component: \"span\",\n        className: classes.button,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, \"Train\")))), React.createElement(\"div\", {\n        className: classes.form,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        id: \"outlined-helperText\",\n        label: \"\\u59D3\\u540D\",\n        value: this.state.name,\n        error: error1,\n        helperText: errorMessage1,\n        onClick: this.handleFocus,\n        onChange: this.handleChange('student_name'),\n        className: classes.textFieldLeft,\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        id: \"outlined-helperText\",\n        label: \"\\u5B78\\u865F\",\n        value: this.state.number,\n        error: error2,\n        helperText: errorMessage2,\n        onClick: this.handleFocus,\n        onChange: this.handleChange('student_id'),\n        className: classes.textFieldRight,\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        id: \"outlined-name\",\n        label: \"\\u5E74\\u7D1A\",\n        value: this.state.grade,\n        onChange: this.handleChange('student_grade'),\n        className: classes.textFieldLeft,\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        id: \"date\",\n        label: \"\\u751F\\u65E5\",\n        type: \"date\",\n        value: this.state.student_birth,\n        onChange: this.handleChange('student_birth'),\n        className: classes.textFieldRight,\n        InputLabelProps: {\n          shrink: true\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309\n        },\n        __self: this\n      }, React.createElement(Myclass, {\n        callbackFromParent: this.myCallback,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        id: \"outlined-name\",\n        label: \"\\u5B78\\u6821\",\n        value: this.state.school,\n        onChange: this.handleChange('student_school'),\n        className: classes.textFieldLeft,\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        id: \"outlined-name\",\n        label: \"\\u624B\\u6A5F\",\n        value: this.state.phone,\n        onChange: this.handleChange('student_phone'),\n        className: classes.textFieldRight,\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        id: \"outlined-email-input\",\n        label: \"Email\",\n        value: this.state.email,\n        onChange: this.handleChange('student_email'),\n        className: classes.textFieldFull,\n        type: \"email\",\n        name: \"email\",\n        autoComplete: \"email\",\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        id: \"outlined-name\",\n        label: \"\\u4F4F\\u5740\",\n        value: this.state.address,\n        onChange: this.handleChange('student_address'),\n        className: classes.textFieldFull,\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 357\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        id: \"outlined-name\",\n        label: \"\\u806F\\u7D61\\u4EBA\",\n        value: this.state.parent,\n        onChange: this.handleChange('student_parent'),\n        className: classes.textFieldLeft,\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        id: \"outlined-name\",\n        label: \"\\u806F\\u7D61\\u4EBA\\u624B\\u6A5F\",\n        value: this.state.parentPhone,\n        onChange: this.handleChange('student_parent_phone'),\n        className: classes.textFieldRight,\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 367\n        },\n        __self: this\n      }))), React.createElement(Button, {\n        type: \"submit\",\n        className: classes.button,\n        onClick: this.handleClickOpen,\n        style: {\n          width: 300,\n          margin: '20px auto'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 378\n        },\n        __self: this\n      }, \"\\u9001\\u51FA\"), React.createElement(Dialog, {\n        className: classes.root,\n        open: this.state.open,\n        onClose: this.handleClose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 381\n        },\n        __self: this\n      }, React.createElement(DialogTitle, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 385\n        },\n        __self: this\n      }, \"\\u5DF2\\u9001\\u51FA\\uFF01\"), React.createElement(DialogActions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 386\n        },\n        __self: this\n      }, React.createElement(Button, {\n        style: {\n          margin: 'auto'\n        },\n        onClick: this.handleClose,\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 387\n        },\n        __self: this\n      }, \"\\u78BA\\u5B9A\"))));\n    }\n  }]);\n\n  return OutlinedTextFields;\n}(React.Component);\n\nOutlinedTextFields.propTypes = {\n  classes: PropTypes.object.isRequired\n};\nexport default withStyles(styles)(OutlinedTextFields);","map":{"version":3,"sources":["C:\\Users\\耍廢社\\Desktop\\MyProject\\src\\components\\Apply\\ApplyForm.js"],"names":["React","PropTypes","withStyles","TextField","Myclass","Card","Button","Dialog","DialogActions","DialogTitle","CameraIcon","noTrain","fetchPostStudent","fetchPostClassMember","axios","IP","styles","theme","root","margin","width","container","color","photo","height","marginLeft","marginTop","spacing","unit","input","outline","opacity","train","button","display","border","borderRadius","rightIcon","textFieldLeft","textFieldRight","textFieldFull","form","OutlinedTextFields","props","myCallback","dataFromChild","setState","class_id","handleChange","name","event","target","value","handleSubmit","e","preventDefault","data","fields","student_name","student_id","student_grade","student_phone","student_birth","student_school","student_email","student_parent","student_parent_phone","student_address","student_img","state","imgUrl","console","log","memberData","count","length","index","error1","errorMessage1","error2","errorMessage2","handleFocus","handleClick","create","baseURL","headers","get","then","response","status","Date","catch","error","handleUpload","file","files","formimg","FormData","id","append","method","url","mimeType","res","link","formdata","set","config","handleClickOpen","open","handleClose","stu_img","classes","number","grade","shrink","school","phone","email","address","parent","parentPhone","Component","propTypes","object","isRequired"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Myclass from './ApplyFormClass';\r\nimport { Card, Button } from '@material-ui/core';\r\n\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\n\r\nimport CameraIcon from '@material-ui/icons/CameraAltRounded';\r\nimport noTrain from './noTrain.jpg';\r\nimport { fetchPostStudent, fetchPostClassMember } from '../../api';\r\nimport axios from 'axios';\r\n\r\n// var Airtable = require('airtable');\r\n\r\nconst IP = \"http://localhost:8080\";\r\n\r\nconst styles = theme => ({\r\n    root:{\r\n        margin:'auto',\r\n        width:'40%',\r\n    },\r\n    container: {\r\n        color: 'white',\r\n    },\r\n    photo: {\r\n        width: '200px',\r\n        height: '200px',\r\n        marginLeft: '38%',\r\n        marginTop: theme.spacing.unit * 10,\r\n    },\r\n    input: {\r\n        outline: 'none',\r\n        opacity: 0,\r\n        width:'47%',\r\n    },\r\n    train:{\r\n        marginTop: theme.spacing.unit * 2,\r\n    },\r\n    button: {\r\n        display: 'flex',\r\n        border: '1px #FFBF5F solid',\r\n        borderRadius: '30px',\r\n        color: '#FFBF5F',\r\n        margin: 'auto',\r\n    },\r\n    rightIcon: {\r\n        marginLeft: theme.spacing.unit,\r\n    },\r\n    textFieldLeft: {\r\n        marginLeft: '14%',\r\n        marginTop: theme.spacing.unit * 2,\r\n        color: 'white',\r\n        width: '260px',\r\n    },\r\n    textFieldRight: {\r\n        marginLeft: theme.spacing.unit * 6,\r\n        marginTop: theme.spacing.unit * 2,\r\n        color: 'white',\r\n        width: '260px',\r\n    },\r\n    textFieldFull: {\r\n        marginLeft: '14%',\r\n        marginTop: theme.spacing.unit * 2,\r\n        color: 'white',\r\n        width: '570px',\r\n    },\r\n    form: {\r\n        width: '800px',\r\n        margin: 'auto',\r\n    },\r\n});\r\n\r\nclass OutlinedTextFields extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            class_id: null,\r\n            stu_img: noTrain,\r\n            student_name: '',\r\n            student_id: '',\r\n            student_grade: '',\r\n            student_phone: '',\r\n            student_birth: '1998-07-13',\r\n            student_school: '',\r\n            student_email: '',\r\n            student_parent: '',\r\n            student_parent_phone: '',\r\n            student_address: '',\r\n            error1: false,\r\n            error2: false,\r\n            errorMessage1: '',\r\n            errorMessage2: '',\r\n            imgUrl:'',\r\n            open: false,\r\n        };\r\n    }\r\n    //https://medium.com/@ruthmpardee/passing-data-between-react-components-103ad82ebd17\r\n    myCallback = (dataFromChild) => {\r\n        this.setState({ class_id: dataFromChild });\r\n    }\r\n\r\n    handleChange = name => event => {\r\n        this.setState({\r\n            [name]: event.target.value\r\n        });\r\n        //console.log(this.state);\r\n    };\r\n    // _downloadTxtFile = () => {\r\n    //     var element = document.createElement(\"a\");\r\n    //     var inputValue = \"C:\\\\Face\\\\eGroupAI_FaceEngine_v3.1.0\\\\face\\\\JJ.jpg\t\"+document.getElementById('myInput').value+\"[No]0\"\r\n    //     var file = new Blob([inputValue], {type: 'text/plain'});\r\n    //     element.href = URL.createObjectURL(file);\r\n    //     element.download = \"list.txt\";\r\n    //     element.click();\r\n    //   }\r\n\r\n\r\n    handleSubmit = (e) => {\r\n        e.preventDefault()\r\n        let data = { fields: { student_name: {}, student_id: {}, student_grade: {}, student_phone: {}, student_birth: {}, student_school: {}, student_email: {}, student_parent: {}, student_parent_phone: {}, student_address: {}, student_img:{} } };\r\n        data.fields.student_name = this.state.student_name;\r\n        data.fields.student_id = this.state.student_id;\r\n        data.fields.student_grade = this.state.student_grade;\r\n        data.fields.student_phone = this.state.student_phone;\r\n        data.fields.student_birth = this.state.student_birth;\r\n        data.fields.student_school = this.state.student_school;\r\n        data.fields.student_email = this.state.student_email;\r\n        data.fields.student_parent = this.state.student_parent;\r\n        data.fields.student_parent_phone = this.state.student_parent_phone;\r\n        data.fields.student_address = this.state.student_address;\r\n        data.fields.student_img = [{\"url\":this.state.imgUrl}];\r\n        \r\n        console.log(data);\r\n        if (this.state.student_name !== '' && this.state.student_id !== '') {\r\n            fetchPostStudent(data);\r\n            let memberData = { fields: { class_id: {}, student_id: {} } };\r\n            var count = this.state.class_id.length;\r\n            for (var index = 0; index < count; index++) {\r\n                memberData.fields.student_id = this.state.student_id\r\n                memberData.fields.class_id = this.state.class_id[index]\r\n            }\r\n            fetchPostClassMember(memberData);\r\n        }\r\n        else {\r\n            if (this.state.student_name === '') {\r\n                this.setState({ error1: true, errorMessage1: '*此欄位必填' })\r\n            }\r\n            else if (this.state.student_id === '') {\r\n                this.setState({ error2: true, errorMessage2: '*此欄位必填' })\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n\r\n    handleFocus = e => {\r\n        this.setState({\r\n            error1: false,\r\n            error2: false,\r\n            errorMessage1: '',\r\n            errorMessage2: '',\r\n        })\r\n    }\r\n\r\n    handleClick = () => {\r\n        axios.create({\r\n            baseURL: IP,\r\n            headers: { 'content-type': 'application/json', 'Access-Control-Allow-Origin': '*' }\r\n        }).get(\"/retrieveface\")\r\n            .then((response) => {\r\n                console.log(\"in response\");\r\n                console.log('open :', response.status, '\\nopen camera', new Date());\r\n            })\r\n            .catch((error) =>\r\n                console.error(error)\r\n            );\r\n    };\r\n\r\n    handleUpload = (e) => {\r\n        e.preventDefault();\r\n        ////\r\n        let file = e.target.files[0];\r\n        const formimg = new FormData();\r\n        const id = '4a951eb39b49f41'; // 填入 App 的 Client ID\r\n        formimg.append('image', file); //required\r\n        formimg.append('title', 'test'); //optional\r\n        formimg.append('description', 'test'); //optional\r\n\r\n        axios({\r\n            method: 'POST',\r\n            url: 'https://api.imgur.com/3/image',\r\n            data: formimg,\r\n            headers: { 'Content-Type': 'multipart/form-data' , 'authorization': 'Client-ID ' + id },\r\n            mimeType: 'multipart/form-data'\r\n            }).then(res => {\r\n                console.log(res);\r\n                //console.log(res.data.data.link);\r\n                this.setState({imgUrl : res.data.data.link});\r\n            }).catch(e => {\r\n                console.log(e)\r\n            })\r\n        ////\r\n        const formdata = new FormData();\r\n        formdata.append('file', file);\r\n        formdata.set('faceid', this.state.student_id);\r\n\r\n        axios({\r\n            method: 'post',\r\n            url: 'http://localhost:8080/train',\r\n            data: formdata,\r\n            config: { headers: { 'Content-Type': 'multipart/form-data' } }\r\n        })\r\n            .then((response) => {\r\n                console.log(\"in upload\")\r\n            })\r\n            .catch((error) =>\r\n                console.error(error)\r\n            );\r\n    };\r\n\r\n\r\n    handleClickOpen = () =>{\r\n        this.setState({ open: true });\r\n    };\r\n\r\n    handleClose = () => {\r\n        this.setState({ open: false });\r\n    };\r\n\r\n    componentDidUpdate() {\r\n        console.log(this.state);\r\n    };\r\n\r\n\r\n    render() {\r\n        const { error1, error2, errorMessage1, errorMessage2 } = this.state\r\n        const { classes } = this.props;\r\n\r\n        return (\r\n            <form onSubmit={this.handleSubmit} className={classes.container} noValidate autoComplete=\"off\">\r\n                <div style={{width:'100%'}}> \r\n                <img className={classes.photo} src={this.state.stu_img} alt=\"location\" />\r\n                    <Button className={classes.button} onClick={this.handleClick}>\r\n                        Open Camera\r\n                    <CameraIcon className={classes.rightIcon} />\r\n                    </Button>\r\n                    <div className={classes.train}>\r\n                    <input type=\"file\" name=\"file\" ref=\"file\"  id=\"contained-button-file\" onChange={this.handleUpload} className={classes.input}/>\r\n                    <label htmlFor=\"contained-button-file\">\r\n                        <Button component=\"span\"  className={classes.button}>\r\n                            Train\r\n                        </Button>\r\n                    </label>\r\n                    </div>\r\n                </div>\r\n                <div className={classes.form}>\r\n                    <div>\r\n                        <TextField\r\n                            id=\"outlined-helperText\"\r\n                            label=\"姓名\"\r\n                            value={this.state.name}\r\n                            error={error1}\r\n                            helperText={errorMessage1}\r\n                            onClick={this.handleFocus}\r\n                            onChange={this.handleChange('student_name')}\r\n                            className={classes.textFieldLeft}\r\n                            margin=\"normal\"\r\n                            variant=\"outlined\"\r\n                        />\r\n                        <TextField\r\n                            id=\"outlined-helperText\"\r\n                            label=\"學號\"\r\n                            value={this.state.number}\r\n                            error={error2}\r\n                            helperText={errorMessage2}\r\n                            onClick={this.handleFocus}\r\n                            onChange={this.handleChange('student_id')}\r\n                            className={classes.textFieldRight}\r\n                            margin=\"normal\"\r\n                            variant=\"outlined\"\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <TextField\r\n                            id=\"outlined-name\"\r\n                            label=\"年級\"\r\n                            value={this.state.grade}\r\n                            onChange={this.handleChange('student_grade')}\r\n                            className={classes.textFieldLeft}\r\n                            margin=\"normal\"\r\n                            variant=\"outlined\"\r\n                        />\r\n                        <TextField\r\n                            id=\"date\"\r\n                            label=\"生日\"\r\n                            type=\"date\"\r\n                            value={this.state.student_birth}\r\n                            onChange={this.handleChange('student_birth')}\r\n                            className={classes.textFieldRight}\r\n                            InputLabelProps={{\r\n                                shrink: true,\r\n                            }}\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <Myclass callbackFromParent={this.myCallback} />\r\n                    </div>\r\n                    <div>\r\n                        <TextField\r\n                            id=\"outlined-name\"\r\n                            label=\"學校\"\r\n                            value={this.state.school}\r\n                            onChange={this.handleChange('student_school')}\r\n                            className={classes.textFieldLeft}\r\n                            margin=\"normal\"\r\n                            variant=\"outlined\"\r\n                        />\r\n                        <TextField\r\n                            id=\"outlined-name\"\r\n                            label=\"手機\"\r\n                            value={this.state.phone}\r\n                            onChange={this.handleChange('student_phone')}\r\n                            className={classes.textFieldRight}\r\n                            margin=\"normal\"\r\n                            variant=\"outlined\"\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <TextField\r\n                            id=\"outlined-email-input\"\r\n                            label=\"Email\"\r\n                            value={this.state.email}\r\n                            onChange={this.handleChange('student_email')}\r\n                            className={classes.textFieldFull}\r\n                            type=\"email\"\r\n                            name=\"email\"\r\n                            autoComplete=\"email\"\r\n                            margin=\"normal\"\r\n                            variant=\"outlined\"\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <TextField\r\n                            id=\"outlined-name\"\r\n                            label=\"住址\"\r\n                            value={this.state.address}\r\n                            onChange={this.handleChange('student_address')}\r\n                            className={classes.textFieldFull}\r\n                            margin=\"normal\"\r\n                            variant=\"outlined\"\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <TextField\r\n                            id=\"outlined-name\"\r\n                            label=\"聯絡人\"\r\n                            value={this.state.parent}\r\n                            onChange={this.handleChange('student_parent')}\r\n                            className={classes.textFieldLeft}\r\n                            margin=\"normal\"\r\n                            variant=\"outlined\"\r\n                        />\r\n                        <TextField\r\n                            id=\"outlined-name\"\r\n                            label=\"聯絡人手機\"\r\n                            value={this.state.parentPhone}\r\n                            onChange={this.handleChange('student_parent_phone')}\r\n                            className={classes.textFieldRight}\r\n                            margin=\"normal\"\r\n                            variant=\"outlined\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <Button type=\"submit\" className={classes.button} onClick={this.handleClickOpen} style={{ width: 300, margin: '20px auto', }}>\r\n                    送出\r\n                </Button>\r\n                <Dialog className={classes.root}\r\n                    open={this.state.open}\r\n                    onClose={this.handleClose}\r\n                >\r\n                    <DialogTitle >已送出！</DialogTitle>\r\n                    <DialogActions>\r\n                        <Button style={{margin:'auto'}} onClick={this.handleClose} color=\"primary\">確定</Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n\r\n                {/* <div>\r\n                    <input id=\"myInput\" />\r\n                    <button onClick={this._downloadTxtFile}>Download txt</button>\r\n                </div> */}\r\n            </form>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nOutlinedTextFields.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n};\r\n\r\n\r\nexport default withStyles(styles)(OutlinedTextFields);\r\n"]},"metadata":{},"sourceType":"module"}