{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\\\u800D\\u5EE2\\u793E\\\\Desktop\\\\MyProject\\\\src\\\\components\\\\Rollcall\\\\Rollcall.js\";\nimport React from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport AppBar from '../AppBar/Appbar';\nimport { FormControlLabel, FormGroup, Switch, Radio, RadioGroup, FormControl, InputLabel, MenuItem, Select, OutlinedInput, Typography, TextField, Dialog, DialogActions, DialogTitle } from '@material-ui/core';\nimport { Button } from '@material-ui/core';\nimport Add from '@material-ui/icons/AddBoxOutlined';\nimport NoFace from './noFace.jpg';\nimport axios from 'axios';\nimport Airtable from 'airtable';\nimport { fetchPostAttend } from '../../api';\nimport { NavLink } from \"react-router-dom\";\nvar TABLE_NAME = 'Student';\nvar CLASS_TABLE_NAME = 'ClassDay';\nvar base = new Airtable({\n  apiKey: 'keyA7EKdngjou4Dgy'\n}).base('appcXtOTPnE4QWIIt');\nvar table = base(TABLE_NAME);\nvar classTable = base(CLASS_TABLE_NAME);\nvar IP = \"http://localhost:8080\";\n\nfunction createData(classid, grade) {\n  return {\n    id: classid,\n    grade: grade\n  };\n}\n\nfunction createStuData(stu_id, name, image, phone, parent) {\n  return {\n    id: stu_id,\n    name: name,\n    image: image,\n    phone: phone,\n    parent: parent\n  };\n}\n\nvar styles = function styles(theme) {\n  return {\n    selectBar: {\n      width: '80%',\n      margin: 'auto',\n      marginTop: theme.spacing.unit * 5,\n      border: '#FFBF5F solid 0.8px',\n      borderRadius: '10px',\n      display: 'flex',\n      flexDirection: 'row',\n      minWidth: '900px'\n    },\n    radio: {\n      marginLeft: '10%'\n    },\n    homework: {\n      marginLeft: '5%'\n    },\n    formControl: {\n      margin: 'auto 0',\n      marginLeft: '7%'\n    },\n    label: {\n      fontSize: '14pt'\n    },\n    select: {\n      width: '180px'\n    },\n    buttonStart: {\n      fontSize: '16pt',\n      height: '50px',\n      border: '#FFBF5F solid 0.8px',\n      borderRadius: '10px',\n      margin: 'auto 0',\n      marginLeft: '15%'\n    },\n    info: {\n      width: '80%',\n      minWidth: '900px',\n      margin: 'auto'\n    },\n    photo: {\n      width: '200px',\n      height: '200px',\n      marginLeft: '40%',\n      marginTop: theme.spacing.unit * 10\n    },\n    studentInfo: {\n      fontSize: '16pt',\n      marginLeft: '45%',\n      marginTop: theme.spacing.unit * 5\n    },\n    textField: {\n      float: 'right'\n    },\n    addIcon: {\n      float: 'right',\n      color: '#FFBF5F',\n      fontSize: '40pt',\n      marginTop: theme.spacing.unit * 2\n    },\n    buttonEnd: {\n      float: 'right',\n      fontSize: '16pt',\n      height: '50px',\n      border: '#FFBF5F solid 0.8px',\n      borderRadius: '10px',\n      margin: 'auto 0',\n      marginLeft: theme.spacing.unit\n    },\n    yes: {\n      marginLeft: '36.5%',\n      marginTop: theme.spacing.unit * 2,\n      height: '50px',\n      width: '140px',\n      backgroundColor: 'green'\n    },\n    no: {\n      marginLeft: theme.spacing.unit * 3,\n      marginTop: theme.spacing.unit * 2,\n      height: '50px',\n      width: '140px',\n      backgroundColor: 'red'\n    },\n    finish: {\n      float: 'right',\n      marginTop: '26.5%',\n      marginRight: '10%'\n    }\n  };\n};\n\nvar Rollcall =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Rollcall, _React$Component);\n\n  function Rollcall() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Rollcall);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Rollcall)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      value: '',\n      nowClass: '',\n      nowClassKey: '',\n      start: false,\n      end: true,\n      stu_id: '',\n      stu_name: '',\n      stu_img: NoFace,\n      face_id: '',\n      open: false,\n      // face_time: '',\n      classDataInit: [],\n      classData: [],\n      stuDataInit: [],\n      class_id: '',\n      checkedHomework: true,\n      checkedFinish: true,\n      age: '',\n      absent: []\n    };\n\n    _this.handleChange = function (name) {\n      return function (event) {\n        _this.setState(_defineProperty({}, name, event.target.value));\n\n        var temp = [];\n\n        if (event.target.value === \"國中\") {\n          for (var index = 0; index < _this.state.classDataInit.length; index++) {\n            if (_this.state.classDataInit[index].grade == \"middle\") {\n              temp.push(_this.state.classDataInit[index]);\n            }\n          }\n\n          _this.setState({\n            classData: temp\n          });\n        } else if (event.target.value === \"高中\") {\n          for (var index = 0; index < _this.state.classDataInit.length; index++) {\n            if (_this.state.classDataInit[index].grade == \"high\") {\n              temp.push(_this.state.classDataInit[index]);\n            }\n          }\n\n          _this.setState({\n            classData: temp\n          });\n        }\n      };\n    };\n\n    _this.handleClassChange = function (name) {\n      return function (event) {\n        _this.setState(_defineProperty({}, name, event.target.value));\n\n        _this.setState({\n          class_id: event.target.value\n        });\n\n        var fileterSentence = 'AND(class_id_link=\"' + event.target.value + '\")';\n        table.select({\n          filterByFormula: fileterSentence,\n          view: \"Grid view\" //maxRecords: 1\n\n        }).eachPage(function (records, fetchNextPage) {\n          _this.setState({\n            records: records\n          });\n\n          var student_name = _this.state.records.map(function (record, index) {\n            return record.fields['student_name'];\n          });\n\n          var student_id = _this.state.records.map(function (record, index) {\n            return record.fields['student_id'];\n          });\n\n          var student_img = _this.state.records.map(function (record, index) {\n            return record.fields['student_img'][0].url;\n          });\n\n          var student_phone = _this.state.records.map(function (record, index) {\n            return record.fields['student_phone'];\n          });\n\n          var student_parent_phone = _this.state.records.map(function (record, index) {\n            return record.fields['student_parent_phone'];\n          });\n\n          var temp = [];\n\n          for (var index = 0; index < student_name.length; index++) {\n            temp.push(createStuData(student_id[index], student_name[index], student_img[index], student_phone[index], student_parent_phone[index]));\n          }\n\n          _this.setState({\n            stuDataInit: temp\n          });\n\n          _this.setState({\n            absent: temp\n          });\n        });\n      };\n    };\n\n    _this.handleStart = function (e) {\n      axios.create({\n        baseURL: IP,\n        headers: {\n          'content-type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      }).get(\"/retrieveface\").then(function (response) {\n        console.log(\"in response\");\n        console.log('open :', response.status, '\\nopen camera', new Date());\n      }).catch(function (error) {\n        return console.error(error);\n      });\n      axios.create({\n        baseURL: IP,\n        headers: {\n          'content-type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      }).get(\"/real\").then(function (response) {}).catch(function (error) {\n        return console.error(error);\n      });\n\n      _this.setState({\n        start: true\n      });\n\n      _this.setState({\n        end: false\n      });\n\n      var data = {\n        fields: {\n          class_id: {},\n          student_id: {},\n          attend_hw: {}\n        }\n      };\n      data.fields.class_id = _this.state.class_id;\n      data.fields.student_id = 'admin';\n      data.fields.attend_hw = _this.state.checkedHomework;\n      fetchPostAttend(data);\n    };\n\n    _this.handleHomework = function (name) {\n      return function (event) {\n        _this.setState(_defineProperty({}, name, event.target.checked));\n      };\n    };\n\n    _this.handleFinish = function (name) {\n      return function (event) {\n        _this.setState(_defineProperty({}, name, event.target.checked));\n      };\n    };\n\n    _this.handleEnd = function (e) {\n      _this.setState({\n        open: true\n      });\n    };\n\n    _this.handleYes = function (e) {\n      // let data = { fields: { class_id: {}, attend_date: {}, student_id: {}, attend_time: {} } };\n      // data.fields.class_id = this.state.class_id;\n      // data.fields.attend_date = this.state.face_time.split(\" \")[0];\n      // data.fields.student_id = this.state.stu_id;\n      // data.fields.attend_time = (this.state.face_time.split(\" \")[1]).split(\":\")[0] + \":\" +\n      //   (this.state.face_time.split(\" \")[1]).split(\":\")[1];\n      var data = {\n        fields: {\n          class_id: {},\n          student_id: {},\n          attend_hw: {}\n        }\n      };\n      data.fields.class_id = _this.state.class_id;\n      data.fields.student_id = _this.state.stu_id;\n      data.fields.attend_hw = _this.state.checkedFinish;\n      fetchPostAttend(data);\n\n      for (var i = 0; i < _this.state.absent.length; i++) {\n        if (_this.state.stu_id == _this.state.absent[i].id) {\n          delete _this.state.absent[i];\n        }\n      }\n    };\n\n    _this.handleNo = function (e) {};\n\n    _this.handleClickAdd = function (name) {\n      return function (event) {\n        for (var index = 0; index < _this.state.stuDataInit.length; index++) {\n          if (_this.state.stuDataInit[index].id == _this.state.age) {\n            _this.setState({\n              stu_id: _this.state.stuDataInit[index].id,\n              stu_name: _this.state.stuDataInit[index].name,\n              stu_img: _this.state.stuDataInit[index].image\n            });\n          }\n        } //console.log(this.state.age);\n\n      };\n    };\n\n    _this.handleChange = function (name) {\n      return function (event) {\n        _this.setState(_defineProperty({}, name, event.target.value));\n      };\n    };\n\n    _this.handleNotEnd = function (e) {\n      _this.setState({\n        open: false\n      });\n    };\n\n    _this.handleRealEnd = function (e) {\n      axios.create({\n        baseURL: IP,\n        headers: {\n          'content-type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      }).get(\"/terminate\").then(function (response) {\n        console.log(\"in terminate\");\n      }).catch(function (error) {\n        return console.error(error);\n      });\n\n      _this.setState({\n        start: false\n      });\n\n      _this.setState({\n        end: true\n      });\n\n      _this.setState({\n        open: false\n      });\n    };\n\n    _this.handleClose = function () {\n      _this.setState({\n        open: false\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Rollcall, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this2 = this;\n\n      if (this.state.face_id !== prevProps.face_id && this.state.end === false) {\n        axios.create({\n          baseURL: IP,\n          headers: {\n            'content-type': 'application/json',\n            'Access-Control-Allow-Origin': '*'\n          }\n        }).get(\"/real\").then(function (response) {\n          var face_id = response.data; // var face_id = response.data.split(\"!\")[0];\n          // var face_time = response.data.split(\"!\")[1];\n\n          _this2.setState({\n            face_id: face_id\n          }); //this.setState({ face_time: face_time });\n\n\n          for (var index = 0; index < _this2.state.stuDataInit.length; index++) {\n            if (_this2.state.stuDataInit[index].id == _this2.state.face_id) {\n              _this2.setState({\n                stu_id: _this2.state.stuDataInit[index].id,\n                stu_name: _this2.state.stuDataInit[index].name,\n                stu_img: _this2.state.stuDataInit[index].image\n              });\n            }\n          }\n        }).catch(function (error) {\n          return console.error(error);\n        });\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this3 = this;\n\n      classTable.select({\n        //filterByFormula: fileterSentence,\n        view: \"Grid view\" //maxRecords: 1\n\n      }).eachPage(function (records, fetchNextPage) {\n        _this3.setState({\n          records: records\n        });\n\n        var class_id = _this3.state.records.map(function (record, index) {\n          return record.fields['class_id'];\n        });\n\n        var class_grade_id = _this3.state.records.map(function (record, index) {\n          return record.fields['class_grade_id'];\n        });\n\n        var temp = [];\n\n        for (var index = 0; index < class_id.length; index++) {\n          temp.push(createData(class_id[index], class_grade_id[index]));\n        }\n\n        _this3.setState({\n          classDataInit: temp\n        });\n\n        _this3.setState({\n          classData: temp\n        });\n      });\n    } //選國高中\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var classes = this.props.classes;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 405\n        },\n        __self: this\n      }, React.createElement(AppBar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 407\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: classes.selectBar,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 408\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        className: classes.radio,\n        component: \"fieldset\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 409\n        },\n        __self: this\n      }, React.createElement(RadioGroup, {\n        \"aria-label\": \"area\",\n        name: \"area\",\n        className: classes.group,\n        value: this.state.value,\n        onChange: this.handleChange('value'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 410\n        },\n        __self: this\n      }, React.createElement(FormControlLabel, {\n        classes: {\n          label: classes.label\n        },\n        value: \"\\u570B\\u4E2D\",\n        control: React.createElement(Radio, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 417\n          },\n          __self: this\n        }),\n        label: \"\\u570B\\u4E2D\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 417\n        },\n        __self: this\n      }), React.createElement(FormControlLabel, {\n        classes: {\n          label: classes.label\n        },\n        value: \"\\u9AD8\\u4E2D\",\n        control: React.createElement(Radio, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 418\n          },\n          __self: this\n        }),\n        label: \"\\u9AD8\\u4E2D\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 418\n        },\n        __self: this\n      }))), React.createElement(FormGroup, {\n        className: classes.homework,\n        row: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 421\n        },\n        __self: this\n      }, React.createElement(FormControlLabel, {\n        control: React.createElement(Switch, {\n          checked: this.state.checkedHomework,\n          onChange: this.handleHomework('checkedHomework'),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 424\n          },\n          __self: this\n        }),\n        label: \"\\u4F5C\\u696D\\u7E73\\u4EA4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 422\n        },\n        __self: this\n      })), React.createElement(FormControl, {\n        variant: \"outlined\",\n        className: classes.formControl,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 432\n        },\n        __self: this\n      }, React.createElement(InputLabel, {\n        ref: function ref(_ref) {\n          _this4.InputLabelRef = _ref;\n        },\n        htmlFor: \"outlined-nowClass-simple\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 433\n        },\n        __self: this\n      }, \"\\u73ED\\u7D1A\"), React.createElement(Select, {\n        value: this.state.nowClass,\n        onChange: this.handleClassChange('nowClass'),\n        className: classes.select,\n        input: React.createElement(OutlinedInput, {\n          labelWidth: this.state.labelWidth,\n          name: \"nowClass\",\n          id: \"outlined-nowClass-simple\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 446\n          },\n          __self: this\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 441\n        },\n        __self: this\n      }, React.createElement(MenuItem, {\n        value: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 453\n        },\n        __self: this\n      }, React.createElement(\"em\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 454\n        },\n        __self: this\n      }, \"\\u73ED\\u7D1A\")), this.state.classData.map(function (n, index) {\n        return React.createElement(MenuItem, {\n          key: n.id,\n          value: n.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 458\n          },\n          __self: this\n        }, n.id);\n      }))), React.createElement(Button, {\n        disabled: this.state.start,\n        className: classes.buttonStart,\n        onClick: this.handleStart,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 467\n        },\n        __self: this\n      }, \"\\u958B\\u59CB\\u9EDE\\u540D\"), React.createElement(Button, {\n        disabled: this.state.end,\n        className: classes.buttonEnd,\n        onClick: this.handleEnd,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 468\n        },\n        __self: this\n      }, \"\\u7D50\\u675F\\u9EDE\\u540D\"), React.createElement(Dialog, {\n        open: this.state.open,\n        onClose: this.handleClose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 470\n        },\n        __self: this\n      }, React.createElement(DialogTitle, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 474\n        },\n        __self: this\n      }, \"\\u662F\\u5426\\u7D50\\u675F\\u9EDE\\u540D\\uFF1F\"), React.createElement(DialogActions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 475\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.handleNotEnd,\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 476\n        },\n        __self: this\n      }, \"\\u53D6\\u6D88\"), React.createElement(NavLink, {\n        style: {\n          textDecoration: 'none'\n        },\n        activeClassName: \"active\",\n        to: {\n          pathname: '/late',\n          aboutProps: {\n            name: this.state.absent\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 477\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.handleRealEnd,\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 478\n        },\n        __self: this\n      }, \"\\u78BA\\u5B9A\"))))), this.state.start === true ? React.createElement(\"div\", {\n        className: classes.info,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 488\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        className: classes.photo,\n        src: this.state.stu_img,\n        alt: \"location\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 489\n        },\n        __self: this\n      }), this.state.checkedHomework === true ? React.createElement(FormGroup, {\n        className: classes.finish,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 491\n        },\n        __self: this\n      }, React.createElement(FormControlLabel, {\n        control: React.createElement(Switch, {\n          checked: this.state.checkedFinish,\n          onChange: this.handleFinish('checkedFinish'),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 494\n          },\n          __self: this\n        }),\n        label: \"\\u78BA\\u8A8D\\u7E73\\u4EA4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 492\n        },\n        __self: this\n      })) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 503\n        },\n        __self: this\n      }), React.createElement(\"pre\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 505\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        className: classes.studentInfo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 506\n        },\n        __self: this\n      }, \"\\u59D3\\u540D\\uFF1A\", this.state.stu_name, \"     \\u5B78\\u865F\\uFF1A\", this.state.stu_id)), React.createElement(Button, {\n        onClick: this.handleYes,\n        className: classes.yes,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 508\n        },\n        __self: this\n      }, \"Yes\"), React.createElement(Button, {\n        onClick: this.handleNo,\n        className: classes.no,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 509\n        },\n        __self: this\n      }, \"NO\"), React.createElement(Add, {\n        className: classes.addIcon,\n        onClick: this.handleClickAdd(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 511\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        id: \"filled-with-placeholder\",\n        label: \"\\u8F38\\u5165\\u5B78\\u865F\",\n        className: classes.textField,\n        value: this.state.age,\n        onChange: this.handleChange('age'),\n        margin: \"normal\",\n        variant: \"filled\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 512\n        },\n        __self: this\n      })) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 522\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Rollcall;\n}(React.Component);\n\nexport default withStyles(styles)(Rollcall);","map":{"version":3,"sources":["C:\\Users\\耍廢社\\Desktop\\MyProject\\src\\components\\Rollcall\\Rollcall.js"],"names":["React","withStyles","AppBar","FormControlLabel","FormGroup","Switch","Radio","RadioGroup","FormControl","InputLabel","MenuItem","Select","OutlinedInput","Typography","TextField","Dialog","DialogActions","DialogTitle","Button","Add","NoFace","axios","Airtable","fetchPostAttend","NavLink","TABLE_NAME","CLASS_TABLE_NAME","base","apiKey","table","classTable","IP","createData","classid","grade","id","createStuData","stu_id","name","image","phone","parent","styles","theme","selectBar","width","margin","marginTop","spacing","unit","border","borderRadius","display","flexDirection","minWidth","radio","marginLeft","homework","formControl","label","fontSize","select","buttonStart","height","info","photo","studentInfo","textField","float","addIcon","color","buttonEnd","yes","backgroundColor","no","finish","marginRight","Rollcall","state","value","nowClass","nowClassKey","start","end","stu_name","stu_img","face_id","open","classDataInit","classData","stuDataInit","class_id","checkedHomework","checkedFinish","age","absent","handleChange","event","setState","target","temp","index","length","push","handleClassChange","fileterSentence","filterByFormula","view","eachPage","records","fetchNextPage","student_name","map","record","fields","student_id","student_img","url","student_phone","student_parent_phone","handleStart","e","create","baseURL","headers","get","then","response","console","log","status","Date","catch","error","data","attend_hw","handleHomework","checked","handleFinish","handleEnd","handleYes","i","handleNo","handleClickAdd","handleNotEnd","handleRealEnd","handleClose","prevProps","class_grade_id","classes","props","group","ref","InputLabelRef","labelWidth","n","textDecoration","pathname","aboutProps","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport AppBar from '../AppBar/Appbar';\r\nimport {\r\n  FormControlLabel,\r\n  FormGroup,\r\n  Switch,\r\n  Radio,\r\n  RadioGroup,\r\n  FormControl,\r\n  InputLabel,\r\n  MenuItem,\r\n  Select,\r\n  OutlinedInput,\r\n  Typography,\r\n  TextField,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogTitle\r\n} from '@material-ui/core';\r\nimport { Button } from '@material-ui/core';\r\n\r\nimport Add from '@material-ui/icons/AddBoxOutlined';\r\n\r\nimport NoFace from './noFace.jpg';\r\nimport axios from 'axios';\r\nimport Airtable from 'airtable';\r\nimport { fetchPostAttend } from '../../api';\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\n\r\nconst TABLE_NAME = 'Student';\r\nconst CLASS_TABLE_NAME = 'ClassDay';\r\nconst base = new Airtable({ apiKey: 'keyA7EKdngjou4Dgy' }).base('appcXtOTPnE4QWIIt');\r\nconst table = base(TABLE_NAME);\r\nconst classTable = base(CLASS_TABLE_NAME);\r\n\r\nconst IP = \"http://localhost:8080\";\r\n\r\nfunction createData(classid, grade) {\r\n  return { id: classid, grade };\r\n}\r\n\r\nfunction createStuData(stu_id, name, image, phone, parent) {\r\n  return { id: stu_id, name, image, phone, parent };\r\n}\r\n\r\nconst styles = theme => ({\r\n  selectBar: {\r\n    width: '80%',\r\n    margin: 'auto',\r\n    marginTop: theme.spacing.unit * 5,\r\n    border: '#FFBF5F solid 0.8px',\r\n    borderRadius: '10px',\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    minWidth: '900px',\r\n  },\r\n  radio: {\r\n    marginLeft: '10%',\r\n  },\r\n  homework:{\r\n    marginLeft: '5%',\r\n  },\r\n  formControl: {\r\n    margin: 'auto 0',\r\n    marginLeft: '7%',\r\n  },\r\n  label: {\r\n    fontSize: '14pt',\r\n  },\r\n  select: {\r\n    width: '180px'\r\n  },\r\n  buttonStart: {\r\n    fontSize: '16pt',\r\n    height: '50px',\r\n    border: '#FFBF5F solid 0.8px',\r\n    borderRadius: '10px',\r\n    margin: 'auto 0',\r\n    marginLeft: '15%',\r\n  },\r\n\r\n  info: {\r\n    width: '80%',\r\n    minWidth: '900px',\r\n    margin: 'auto',\r\n  },\r\n\r\n  photo: {\r\n    width: '200px',\r\n    height: '200px',\r\n    marginLeft: '40%',\r\n    marginTop: theme.spacing.unit * 10,\r\n  },\r\n\r\n  studentInfo: {\r\n    fontSize: '16pt',\r\n    marginLeft: '45%',\r\n    marginTop: theme.spacing.unit * 5,\r\n  },\r\n  textField: {\r\n    float: 'right',\r\n  },\r\n  addIcon: {\r\n    float: 'right',\r\n    color: '#FFBF5F',\r\n    fontSize: '40pt',\r\n    marginTop: theme.spacing.unit * 2,\r\n  },\r\n  buttonEnd: {\r\n    float: 'right',\r\n    fontSize: '16pt',\r\n    height: '50px',\r\n    border: '#FFBF5F solid 0.8px',\r\n    borderRadius: '10px',\r\n    margin: 'auto 0',\r\n    marginLeft: theme.spacing.unit,\r\n  },\r\n  yes: {\r\n    marginLeft: '36.5%',\r\n    marginTop: theme.spacing.unit * 2,\r\n    height: '50px',\r\n    width: '140px',\r\n    backgroundColor: 'green'\r\n  },\r\n  no: {\r\n    marginLeft: theme.spacing.unit * 3,\r\n    marginTop: theme.spacing.unit * 2,\r\n    height: '50px',\r\n    width: '140px',\r\n    backgroundColor: 'red',\r\n  },\r\n\r\n  finish:{\r\n    float:'right',\r\n    marginTop:'26.5%',\r\n    marginRight:'10%',\r\n  }\r\n});\r\n\r\nclass Rollcall extends React.Component {\r\n  // props = {\r\n  //   face_id:'',\r\n  // }\r\n\r\n  state = {\r\n    value: '',\r\n    nowClass: '',\r\n    nowClassKey: '',\r\n    start: false,\r\n    end: true,\r\n    stu_id: '',\r\n    stu_name: '',\r\n    stu_img: NoFace,\r\n    face_id: '',\r\n    open:false,\r\n    // face_time: '',\r\n    classDataInit: [],\r\n    classData: [],\r\n    stuDataInit: [],\r\n    class_id: '',\r\n    checkedHomework: true,\r\n    checkedFinish: true,\r\n    age:'',\r\n    absent: [],\r\n  };\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.state.face_id !== prevProps.face_id && this.state.end === false) {\r\n      axios.create({\r\n        baseURL: IP,\r\n        headers: { 'content-type': 'application/json', 'Access-Control-Allow-Origin': '*' }\r\n      }).get(\"/real\")\r\n        .then((response) => {\r\n          var face_id = response.data;\r\n          // var face_id = response.data.split(\"!\")[0];\r\n          // var face_time = response.data.split(\"!\")[1];\r\n\r\n          this.setState({ face_id: face_id });\r\n          //this.setState({ face_time: face_time });\r\n\r\n          for (var index = 0; index < this.state.stuDataInit.length; index++) {\r\n            if (this.state.stuDataInit[index].id == this.state.face_id) {\r\n              this.setState({\r\n                stu_id: this.state.stuDataInit[index].id,\r\n                stu_name: this.state.stuDataInit[index].name,\r\n                stu_img: this.state.stuDataInit[index].image\r\n              });\r\n            }\r\n          }\r\n\r\n        })\r\n        .catch((error) =>\r\n          console.error(error)\r\n        );\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n\r\n    classTable.select({\r\n      //filterByFormula: fileterSentence,\r\n      view: \"Grid view\",\r\n      //maxRecords: 1\r\n    }).eachPage((records, fetchNextPage) => {\r\n      this.setState({ records });\r\n\r\n      const class_id = this.state.records.map((record, index) => record.fields['class_id']);\r\n      const class_grade_id = this.state.records.map((record, index) => record.fields['class_grade_id']);\r\n      var temp = [];\r\n      for (var index = 0; index < class_id.length; index++) {\r\n        temp.push(createData(class_id[index], class_grade_id[index]));\r\n      }\r\n      this.setState({ classDataInit: temp });\r\n      this.setState({ classData: temp });\r\n    }\r\n    );\r\n  }\r\n\r\n  \r\n  //選國高中\r\n  handleChange = name => event => {\r\n    this.setState({ [name]: event.target.value });\r\n    var temp = [];\r\n    if (event.target.value === \"國中\") {\r\n      for (var index = 0; index < this.state.classDataInit.length; index++) {\r\n        if (this.state.classDataInit[index].grade == \"middle\") {\r\n          temp.push(this.state.classDataInit[index]);\r\n        }\r\n      }\r\n      this.setState({ classData: temp });\r\n      \r\n    } else if (event.target.value === \"高中\") {\r\n      for (var index = 0; index < this.state.classDataInit.length; index++) {\r\n        if (this.state.classDataInit[index].grade == \"high\") {\r\n          temp.push(this.state.classDataInit[index]);\r\n        }\r\n      }\r\n      this.setState({ classData: temp });\r\n    }\r\n  };\r\n  \r\n  handleClassChange = name => event => {\r\n    this.setState({ [name]: event.target.value });\r\n    this.setState({ class_id: event.target.value });\r\n    const fileterSentence = 'AND(class_id_link=\"' + event.target.value + '\")'\r\n    table.select({\r\n      filterByFormula: fileterSentence,\r\n      view: \"Grid view\",\r\n      //maxRecords: 1\r\n    }).eachPage((records, fetchNextPage) => {\r\n      this.setState({ records });\r\n      \r\n      const student_name = this.state.records.map((record, index) => record.fields['student_name']);\r\n      const student_id = this.state.records.map((record, index) => record.fields['student_id']);\r\n      const student_img = this.state.records.map((record, index) => record.fields['student_img'][0].url);\r\n      const student_phone = this.state.records.map((record, index) => record.fields['student_phone']);\r\n      const student_parent_phone = this.state.records.map((record, index) => record.fields['student_parent_phone']);\r\n      var temp = [];\r\n      for (var index = 0; index < student_name.length; index++) {\r\n        temp.push(createStuData(student_id[index], student_name[index], student_img[index], student_phone[index], student_parent_phone[index]));\r\n      }\r\n      this.setState({ stuDataInit: temp });\r\n      this.setState({ absent: temp });\r\n      \r\n    }\r\n    );\r\n    \r\n  };\r\n  \r\n\r\n  //開始點名\r\n  handleStart = e => {\r\n    axios.create({\r\n      baseURL: IP,\r\n      headers: { 'content-type': 'application/json', 'Access-Control-Allow-Origin': '*' }\r\n    }).get(\"/retrieveface\")\r\n    .then((response) => {\r\n      console.log(\"in response\");\r\n      console.log('open :', response.status, '\\nopen camera', new Date());\r\n    })\r\n    .catch((error) =>\r\n    console.error(error)\r\n    );\r\n    \r\n    axios.create({\r\n      baseURL: IP,\r\n      headers: { 'content-type': 'application/json', 'Access-Control-Allow-Origin': '*' }\r\n    }).get(\"/real\")\r\n    .then((response) => {\r\n    })\r\n    .catch((error) =>\r\n    console.error(error)\r\n    );\r\n    \r\n    this.setState({ start: true })\r\n    this.setState({ end: false })\r\n\r\n    let data = { fields: { class_id: {}, student_id: {}, attend_hw: {}} };\r\n    data.fields.class_id = this.state.class_id;\r\n    data.fields.student_id = 'admin';\r\n    data.fields.attend_hw = this.state.checkedHomework;\r\n\r\n    fetchPostAttend(data);\r\n  };\r\n  \r\n  //要不要交作業\r\n  handleHomework = name => event => {\r\n    this.setState({ [name]: event.target.checked });\r\n  };\r\n\r\n  //有沒有教作業\r\n  handleFinish = name => event => {\r\n    this.setState({ [name]: event.target.checked });\r\n  };\r\n\r\n\r\n\r\n\r\n  //結束點ㄇㄧㄥˊ\r\n  handleEnd = e => {\r\n    this.setState({open: true})\r\n  };\r\n\r\n\r\n  handleYes = e => {\r\n    // let data = { fields: { class_id: {}, attend_date: {}, student_id: {}, attend_time: {} } };\r\n    // data.fields.class_id = this.state.class_id;\r\n    // data.fields.attend_date = this.state.face_time.split(\" \")[0];\r\n    // data.fields.student_id = this.state.stu_id;\r\n    // data.fields.attend_time = (this.state.face_time.split(\" \")[1]).split(\":\")[0] + \":\" +\r\n    //   (this.state.face_time.split(\" \")[1]).split(\":\")[1];\r\n    let data = { fields: { class_id: {}, student_id: {}, attend_hw: {}} };\r\n    data.fields.class_id = this.state.class_id;\r\n    data.fields.student_id = this.state.stu_id;\r\n    data.fields.attend_hw = this.state.checkedFinish;\r\n\r\n    fetchPostAttend(data);\r\n\r\n    \r\n    for(var i = 0; i < this.state.absent.length; i++){\r\n      if(this.state.stu_id == this.state.absent[i].id){\r\n        delete this.state.absent[i];\r\n      }\r\n    }\r\n\r\n  };\r\n\r\n  handleNo = e => {\r\n  };\r\n\r\n  // handleAbsent = e => {\r\n  //   console.log(this.state.absent);\r\n  // };\r\n\r\n  handleClickAdd = name => event => {\r\n    for (var index = 0; index < this.state.stuDataInit.length; index++) {\r\n      if (this.state.stuDataInit[index].id == this.state.age) {\r\n        this.setState({\r\n          stu_id: this.state.stuDataInit[index].id,\r\n          stu_name: this.state.stuDataInit[index].name,\r\n          stu_img: this.state.stuDataInit[index].image\r\n        });\r\n      }\r\n    }\r\n    //console.log(this.state.age);\r\n\r\n  };\r\n  handleChange = name => event => {\r\n    this.setState({ [name]: event.target.value });\r\n  };\r\n\r\n  //取消結束點名\r\n  handleNotEnd = e =>{\r\n    this.setState({ open: false })\r\n  }\r\n\r\n  //真的結束點名\r\n  handleRealEnd = e =>{\r\n    axios.create({\r\n      baseURL: IP,\r\n      headers: { 'content-type': 'application/json', 'Access-Control-Allow-Origin': '*' }\r\n    }).get(\"/terminate\")\r\n      .then((response) => {\r\n        console.log(\"in terminate\");\r\n      })\r\n      .catch((error) =>\r\n        console.error(error)\r\n      );\r\n\r\n    this.setState({ start: false })\r\n    this.setState({ end: true })\r\n    this.setState({ open: false })\r\n  }\r\n\r\n  //關Dialog\r\n  handleClose = () => {\r\n    this.setState({ open: false });\r\n};\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n    return (\r\n      <div>\r\n\r\n        <AppBar />\r\n        <div className={classes.selectBar}>\r\n          <FormControl className={classes.radio} component=\"fieldset\">\r\n            <RadioGroup\r\n              aria-label=\"area\"\r\n              name=\"area\"\r\n              className={classes.group}\r\n              value={this.state.value}\r\n              onChange={this.handleChange('value')}\r\n            >\r\n              <FormControlLabel classes={{ label: classes.label, }} value=\"國中\" control={<Radio />} label=\"國中\" />\r\n              <FormControlLabel classes={{ label: classes.label, }} value=\"高中\" control={<Radio />} label=\"高中\" />\r\n            </RadioGroup>\r\n          </FormControl>\r\n          <FormGroup className={classes.homework} row>\r\n            <FormControlLabel\r\n              control={\r\n                <Switch\r\n                  checked={this.state.checkedHomework}\r\n                  onChange={this.handleHomework('checkedHomework')}\r\n                />\r\n              }\r\n              label=\"作業繳交\"\r\n            />\r\n          </FormGroup>\r\n          <FormControl variant=\"outlined\" className={classes.formControl}>\r\n            <InputLabel\r\n              ref={ref => {\r\n                this.InputLabelRef = ref;\r\n              }}\r\n              htmlFor=\"outlined-nowClass-simple\"\r\n            >\r\n              班級\r\n                    </InputLabel>\r\n            <Select\r\n              value={this.state.nowClass}\r\n              onChange={this.handleClassChange('nowClass')}\r\n              className={classes.select}\r\n              input={\r\n                <OutlinedInput\r\n                  labelWidth={this.state.labelWidth}\r\n                  name=\"nowClass\"\r\n                  id=\"outlined-nowClass-simple\"\r\n                />\r\n              }\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>班級</em>\r\n              </MenuItem>\r\n              {(this.state.classData).map((n, index) => {\r\n                return (\r\n                  <MenuItem key={n.id} value={n.id}>{n.id}</MenuItem>\r\n                );\r\n              })}\r\n              {/* <MenuItem value={10}>英文Ａ班</MenuItem>\r\n              <MenuItem value={20}>數學Ａ班</MenuItem>\r\n              <MenuItem value={30}>國文Ｂ班</MenuItem> */}\r\n            </Select>\r\n          </FormControl>\r\n\r\n          <Button disabled={this.state.start} className={classes.buttonStart} onClick={this.handleStart}>開始點名</Button>\r\n          <Button disabled={this.state.end} className={classes.buttonEnd} onClick={this.handleEnd}>結束點名</Button>\r\n\r\n          <Dialog\r\n                    open={this.state.open}\r\n                    onClose={this.handleClose}\r\n                >\r\n                    <DialogTitle >是否結束點名？</DialogTitle>\r\n                    <DialogActions>\r\n                        <Button onClick={this.handleNotEnd} color=\"primary\">取消</Button>\r\n                        <NavLink style={{textDecoration:'none'}} activeClassName=\"active\" to={{pathname:'/late', aboutProps:{name:this.state.absent}}}>\r\n                        <Button onClick={this.handleRealEnd} color=\"primary\">確定</Button>\r\n                        </NavLink>\r\n                    </DialogActions>\r\n                </Dialog>\r\n\r\n        </div>\r\n\r\n\r\n        {\r\n          this.state.start === true ?\r\n            <div className={classes.info}>\r\n              <img className={classes.photo} src={this.state.stu_img} alt=\"location\" />\r\n              {this.state.checkedHomework === true ?\r\n              <FormGroup className={classes.finish}>\r\n              <FormControlLabel\r\n                control={\r\n                  <Switch\r\n                    checked={this.state.checkedFinish}\r\n                    onChange={this.handleFinish('checkedFinish')}\r\n                  />\r\n                }\r\n                label=\"確認繳交\"\r\n              />\r\n            </FormGroup>\r\n              :\r\n            <div></div>\r\n              }\r\n              <pre>\r\n                <Typography className={classes.studentInfo}>姓名：{this.state.stu_name}     學號：{this.state.stu_id}</Typography>\r\n                </pre>\r\n              <Button onClick={this.handleYes} className={classes.yes} >Yes</Button>\r\n              <Button onClick={this.handleNo} className={classes.no}>NO</Button>\r\n              {/* <Button ></Button> */}\r\n              <Add className={classes.addIcon} onClick={this.handleClickAdd()}/>\r\n              <TextField\r\n                id=\"filled-with-placeholder\"\r\n                label=\"輸入學號\"\r\n                className={classes.textField}\r\n                value={this.state.age}\r\n                onChange={this.handleChange('age')}\r\n                margin=\"normal\"\r\n                variant=\"filled\"\r\n              />\r\n            </div> :\r\n            <div></div>\r\n        }\r\n\r\n\r\n      </div>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nexport default withStyles(styles)(Rollcall);"]},"metadata":{},"sourceType":"module"}