{"ast":null,"code":"'use strict';\n\nvar DataReader = require('./dataReader');\n\nfunction Uint8ArrayReader(data) {\n  if (data) {\n    this.data = data;\n    this.length = this.data.length;\n    this.index = 0;\n  }\n}\n\nUint8ArrayReader.prototype = new DataReader();\n/**\n * @see DataReader.byteAt\n */\n\nUint8ArrayReader.prototype.byteAt = function (i) {\n  return this.data[i];\n};\n/**\n * @see DataReader.lastIndexOfSignature\n */\n\n\nUint8ArrayReader.prototype.lastIndexOfSignature = function (sig) {\n  var sig0 = sig.charCodeAt(0),\n      sig1 = sig.charCodeAt(1),\n      sig2 = sig.charCodeAt(2),\n      sig3 = sig.charCodeAt(3);\n\n  for (var i = this.length - 4; i >= 0; --i) {\n    if (this.data[i] === sig0 && this.data[i + 1] === sig1 && this.data[i + 2] === sig2 && this.data[i + 3] === sig3) {\n      return i;\n    }\n  }\n\n  return -1;\n};\n/**\n * @see DataReader.readData\n */\n\n\nUint8ArrayReader.prototype.readData = function (size) {\n  this.checkOffset(size);\n\n  if (size === 0) {\n    // in IE10, when using subarray(idx, idx), we get the array [0x00] instead of [].\n    return new Uint8Array(0);\n  }\n\n  var result = this.data.subarray(this.index, this.index + size);\n  this.index += size;\n  return result;\n};\n\nmodule.exports = Uint8ArrayReader;","map":null,"metadata":{},"sourceType":"script"}